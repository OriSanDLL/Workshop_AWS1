[
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/5-network-firewall/5.2-labf/5.2.1-icmp/",
	"title": "Block outbound ICMP",
	"tags": [],
	"description": "",
	"content": "Hướng dẫn chi tiết AWS Network Firewall sử dụng hai rules engines để kiểm tra các gói tin:\nStateless Engine: Kiểm tra các gói tin dựa trên các quy tắc không duy trì trạng thái. Hành động: Có thể loại bỏ gói tin, cho phép nó đi đến đích, hoặc chuyển tiếp nó đến Stateful Engine. Stateful Engine: Kiểm tra các gói tin trong ngữ cảnh của dòng lưu lượng, dựa trên các quy tắc duy trì trạng thái. Hành động: Có thể loại bỏ gói tin hoặc cho phép nó đi đến đích. Ghi log: Gửi các log về lưu lượng và cảnh báo đến logs của firewall, nếu chức năng ghi log được cấu hình. Có thể gửi cảnh báo cho các gói tin bị loại bỏ và tùy chọn gửi cho các gói tin được cho phép. Cấu hình Quy tắc Stateless để Loại bỏ Tất cả Lưu lượng ICMP Vào VPC: Đi đến Firewall Policies: Trong AWS Management Console, mở dịch vụ VPC. Chọn Firewall Policies: Trong menu bên trái, chọn Firewall policies dưới Network firewall. Chọn NFWPolicy: Tìm và chọn NFWPolicy đã được tạo trong phần cấu hình ban đầu Tạo Nhóm Quy tắc Stateless: Trong tab Stateless rule groups, nhấp vào Actions. Chọn Create stateless rule group. Enter the following values: Name: DropICMPv6 Capacity: 100 Under Add rule Protocol: Choose IPv6-ICMP and delete All Source: Any IPv6 adress Destination: Any IPv6 adress scroll down Actions: Drop Click Add rule Trước khi nhấp vào Next, hãy chắc chắn rằng bạn đã thấy quy tắc mới được tạo trong phần Rules.\nClick Next for steps 4, 5 and Create rule group for step 5. Testing Remote Access via Session Manager ping6 tools.keycdn.com Nó sẽ không trả lại bất kỳ phản hồi nào.\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/",
	"title": "Các phương pháp tiếp cận bảo mật nhiều lớp cho Amazon VPC",
	"tags": [],
	"description": "",
	"content": "Các phương pháp tiếp cận bảo mật nhiều lớp cho Amazon VPC Mục đích Trong Workshop này, sẽ đề cập đến hướng dẫn thực tế để bảo mật Amazon VPC. Nó nhắm đến các kiến trúc sư đám mây, quản trị viên hệ thống, quản trị viên mạng và quản trị viên bảo mật, những người chịu trách nhiệm thiết kế, phát triển và chạy các dịch vụ trong AWS.\nVì vậy, bạn phải biết những điều cơ bản như subnet, security groups, VPC flow logs. Trọng tâm sẽ là phạm vi dịch vụ và tính năng bổ sung mà AWS cung cấp cho phép bạn vận hành VPC một cách an toàn. Tại đây, sẽ đề cập đến AWS Network Firewall, VPC Network Access Analyzer, Amazon Route 53 Resolver DNS Firewall, AWS Systems Manager, Traffic Mirroring, AWS WAF, Gateway Load Balancer, v.v. Đồng thời, sẽ sử dụng IPv6 trong một số phòng thí nghiệm - nhưng đừng lo lắng, Workshop sẵn sàng trợ giúp!\nTất cả các ví dụ được đưa ra sẽ tuân theo các biện pháp thực hành tốt nhất về bảo mật, thiết kế và quản lý Amazon VPC. Cuối cùng, bạn nên có một sự hiểu biết về cách thức và lý do tại sao mỗi trong số này có thể được sử dụng, và kiến thức cần thiết để áp dụng những gì bạn đã học vào môi trường của riêng bạn.\nNội dung Tổng quan về Hội Thảo Các bước chuẩn bị Theo dõi: Bảo mật DNS Theo dõi: Phân tích mạng Theo dõi: Tường lửa mạng AWS (IPv6) Theo dõi: Tường lửa của bên thứ 3 sử dụng Gateway Load Balancer (GWLB) Theo dõi: Tường lửa ứng dụng web Dọn dẹp "
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/3-dns-security/3.1-laba/3.1.1-wa/",
	"title": "Hướng dẫn Lab A: Tăng cường khả năng hiển thị hoạt động của VPC",
	"tags": [],
	"description": "",
	"content": "Hãy chắc chắn rằng bạn đang ở đúng khu vực Điều hướng đến trang chủ AWS Console . Hãy đảm bảo ta đang làm việc ở đúng khu vực của mình Bật ghi nhật ký truy vấn DNS Từ trang chủ của bảng điều khiển, nhấp vào hộp tìm kiếm và nhập \u0026ldquo;Route 53\u0026rdquo;. Từ bảng điều khiển Route 53, chọn tùy chọn \u0026ldquo;Query logging\u0026rdquo; từ menu bên trái. Lưu ý - bạn có thể cần thực hiện thao tác này hai lần để tránh \u0026ldquo;splash page\u0026rdquo; của trình giải quyết Route 53. Route 53 mặc định hoạt động ở khu vực US-East-1, vì vậy đảm bảo bạn đang làm việc ở đúng khu vực của mình. Nhấp vào nút “Configure query logging”. Nhập tên cho cấu hình ghi nhật ký truy vấn, chẳng hạn như netvpc, chọn CloudWatch Logs Log Group làm đích và chọn \u0026ldquo;Route53Resolver\u0026rdquo; nhóm nhật ký từ danh sách. Cuộn xuống và sau đó nhấp vào \u0026ldquo;Add VPC\u0026rdquo; Chọn \u0026ldquo;LabVpc\u0026rdquo; tùy chọn và nhấp vào Thêm. Thêm các thẻ bổ sung nếu bạn muốn. Nhấp vào nút \u0026ldquo;Configure query logging\u0026rdquo; để bật ghi nhật ký truy vấn. Bây giờ bạn có thể nhấp vào cấu hình và sau đó kiểm tra xem việc ghi nhật ký có hoạt động hay không bằng cách làm theo liên kết \u0026ldquo;destination ARN\u0026rdquo; Từ trang Nhật ký CloudWatch, bạn có thể xem luồng nhật ký và kiểm tra xem nhật ký truy vấn có đang được thu thập hay không. Tìm kiếm nhật ký bằng CloudWatch Logs Insights Để tìm kiếm qua nhật ký truy vấn DNS, chúng ta có thể sử dụng CloudWatch Logs Insights.\nTừ trang chủ của bảng điều khiển, nhấp vào hộp tìm kiếm và nhập \u0026ldquo;CloudWatch\u0026rdquo;. Từ bảng điều khiển CloudWatch, chọn tùy chọn \u0026ldquo;Logs Insights\u0026rdquo; từ menu bên trái. Từ danh sách thả xuống, chọn \u0026ldquo;Route53Resolver\u0026rdquo; nhóm nhật ký để truy vấn. Xóa truy vấn mẫu (3 dòng) và thay thế bằng: stats count(*) as numRequests by query_name | sort numRequests desc | limit 10 Chạy truy vấn và xem kết quả; lưu ý rằng nếu bạn vừa cấu hình Nhật ký truy vấn, có thể mất vài phút để kết quả xuất hiện. Lưu ý kết quả có \u0026ldquo;bad.sa-demos.net\u0026rdquo; - chúng ta sẽ điều tra thêm về tên miền này và xem có những instance EC2 nào đã truy vấn tên miền này. Chúng ta cũng sẽ đếm theo loại bản ghi, để xem các truy vấn này là dành cho bản ghi IPv4 (A) hay IPv6 (AAAA). Cập nhật truy vấn Log Insights với đoạn mã sau: filter query_name = \u0026#39;bad.sa-demos.net.\u0026#39; | stats count(*) as numRequests by srcids.instance, query_type, answers.0.Rdata as Response | sort numRequests desc | limit 10 Chạy truy vấn và xem kết quả Bạn sẽ thấy một ID instance EC2 trong kết quả tìm kiếm; ID này cùng với tên miền đáng ngờ sẽ được sử dụng trong bài lab tiếp theo. Chúc mừng bạn đã hoàn thành Lab A!\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/3-dns-security/3.2-labb/3.2.1-wb/",
	"title": "Hướng dẫn Lab B: Triển khai tường lửa DNS",
	"tags": [],
	"description": "",
	"content": "Hãy chắc chắn rằng bạn đang ở đúng khu vực Điều hướng đến trang chủ AWS Console . Hãy đảm bảo ta đang làm việc ở đúng khu vực của mình Tạo danh sách miền Tường lửa DNS Route 53 Từ trang chủ của bảng điều khiển, nhấp vào hộp tìm kiếm và nhập VPC. Từ bảng điều khiển VPC, chọn tùy chọn \u0026ldquo;Domain lists\u0026rdquo; từ menu bên trái. Hãy đảm bảo bạn đang làm việc ở đúng khu vực của mình Nhấp vào nút \u0026ldquo;Add domain lists\u0026rdquo; Trong trình tạo danh sách miền, hãy đặt tên cho danh sách (trong ví dụ của chúng tôi là netvpc) Thêm bad.sa-demos.net.(lưu ý dấu chấm), sau đó nhấp vào \u0026ldquo;Add domain lists\u0026rdquo; Từ đây, bạn có thể sử dụng danh sách miền này trong nhóm quy tắc Tường lửa DNS.\nTạo nhóm quy tắc Tường lửa DNS Route 53 Từ bảng điều khiển Amazon VPC, chọn tùy chọn \u0026ldquo;Rule groups\u0026rdquo; từ menu bên trái (bên dưới phần Tường lửa DNS) Nhấp vào nút \u0026ldquo;Add rule group\u0026rdquo; Đối với bước 1, hãy nhập tên cho nhóm quy tắc (trong ví dụ của tôi là , netvpcvà mô tả nếu bạn muốn), sau đó nhấp vào Tiếp theo Đối với bước 2, hãy chọn nút \u0026ldquo;Add rules\u0026rdquo; Đặt tên cho quy tắc (trong ví dụ là: block-bad-domain), chọn thêm danh sách miền của riêng bạn và chọn danh sách miền bạn đã tạo ở các bước trước đó Đối với hành động này, hãy chọn \u0026ldquo;Block\u0026rdquo;, sau đó chọn \u0026ldquo;NXDOMAIN\u0026rdquo; làm phản hồi ưu tiên Nhấp vào \u0026ldquo;Add rule\u0026rdquo;, sau đó nhấp vào Tiếp theo Đối với bước 3, hãy giữ nguyên mức độ ưu tiên của quy tắc và nhấp vào \u0026ldquo;Next\u0026rdquo; Đối với bước 4, hãy thêm thẻ nếu bạn muốn và nhấp vào \u0026ldquo;Next\u0026rdquo; Ở bước 5, hãy xem lại thông tin chi tiết rồi nhấp vào \u0026ldquo;Create rule group\u0026rdquo; Từ danh sách nhóm quy tắc, hãy nhấp vào nhóm quy tắc mới tạo của bạn và chọn \u0026ldquo;View details\u0026rdquo; Từ trang chi tiết, nhấp vào tab \u0026ldquo;Associate VPCs\u0026rdquo; Nhấp vào \u0026ldquo;Associate VPC\u0026rdquo; và trong cửa sổ bật lên xuất hiện, hãy chọn tùy \u0026ldquo;LabVpc\u0026quot;chọn, sau đó nhấp vào Liên kết. Chờ vài phút để quá trình liên kết hoàn tất. Kiểm tra xem nhóm quy tắc DNS có hoạt động không Bạn có thể kiểm tra xem giải quyết DNS có bị lỗi không bằng cách kết nối với Trình publicInstancequản lý phiên - liên kết nhanh để thực hiện việc này có thể được tìm thấy trên Bảng điều khiển CloudWatch của Lab B - và sau khi kết nối, hãy thử lệnh: nslookup bad.sa-demos.net\nMột cách tiếp cận khác là kiểm tra nhóm CloudWatch Logs; để thực hiện việc này, chúng ta có thể sử dụng truy vấn CloudWatch Logs Insights tương tự mà chúng ta đã sử dụng trong Phòng thí nghiệm 2:\nĐiều hướng đến bảng điều khiển CloudWatch và chọn tùy chọn \u0026ldquo;Logs Insights\u0026rdquo; từ menu bên trái. Từ danh sách thả xuống, chọn \u0026quot;Route53Resolver\u0026quot;Nhóm nhật ký để truy vấn. Xóa truy vấn mẫu (3 dòng) và thay thế bằng: filter query_name = \u0026#39;bad.sa-demos.net.\u0026#39; and rcode = \u0026#39;NXDOMAIN\u0026#39; | stats count(*) as numRequests by srcids.instance | sort numRequests desc | limit 10 Chạy truy vấn và xem kết quả Bạn sẽ thấy ID phiên bản EC2 trong kết quả tìm kiếm; điều này cho thấy chúng tôi đã chặn thành công các truy vấn đến tên miền đó từ phiên bản đó. Chúc mừng bạn là hoàn thành Lab B!\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/4-network-analysis/4.1-labc/4.1.1-wc/",
	"title": "Hướng dẫn Lab C: Phân tích cấu hình mạng VPC",
	"tags": [],
	"description": "",
	"content": "Hãy chắc chắn rằng bạn đang ở đúng khu vực Điều hướng đến trang chủ AWS Console . Hãy đảm bảo ta đang làm việc ở đúng khu vực của mình Chạy Network Access Analyzer Chúng ta có thể sử dụng Network Access Analyzer để tự động kiểm tra mọi mô hình truy cập được phép theo cấu hình mạng VPC. Trong trường hợp này, chúng ta sẽ xác định tất cả lưu lượng có thể truy cập vào EC2 từ Internet, ngoại trừ lưu lượng đi qua bộ cân bằng tải WebAlb, vì đó là lưu lượng hợp lệ.\nTừ trang chủ của bảng điều khiển, nhấp vào hộp tìm kiếm và nhập \u0026ldquo;Network Manager\u0026rdquo;. Đây là một tính năng của bảng điều khiển VPC. Từ bảng điều khiển Network Manager, chọn tùy chọn \u0026ldquo;Network access analyzer\u0026rdquo; từ menu bên trái và nhấp vào \u0026ldquo;Get started” Sau vài phút, danh sách các phạm vi truy cập mạng đã được cấu hình sẵn sẽ xuất hiện. Mặc dù chúng ta có thể sử dụng một trong số đó, nhưng chúng ta sẽ tạo một phạm vi truy cập mạng riêng của mình. Nhấp vào nút \u0026ldquo;Create Network Access Scope\u0026rdquo; (Tạo phạm vi truy cập mạng), sau đó chọn \u0026ldquo;Next\u0026rdquo; (Tiếp theo). Chọn bắt đầu với một mẫu trống, sau đó chọn \u0026ldquo;Next\u0026rdquo; (Tiếp theo). Đặt Tên của phạm vi (trong ví dụ là netvpc) và chọn \u0026ldquo;Add Match condition\u0026rdquo; \u0026ldquo;Match findings - conditon 1\u0026rdquo; Source: Resource selection: \u0026ldquo;Resource IDs\u0026rdquo; Resource types: \u0026ldquo;InternetGateway\u0026rdquo; Resource ID: \u0026ldquo;LabVpc/IGW\u0026rdquo; \u0026ldquo;Match findings - conditon 1\u0026rdquo; Destination: Resource selection: \u0026ldquo;Resource Types\u0026rdquo; Resource types: \u0026ldquo;AWS::EC2::Instance\u0026rdquo; \u0026ldquo;Add exclusion condition\u0026rdquo; Through: Resource selection: \u0026ldquo;Resource IDs\u0026rdquo; Resource types: \u0026ldquo;Elastic Load Balancers V2\u0026rdquo; Nhấn \u0026ldquo;Next\u0026rdquo; (Tiếp theo) Nhấn \u0026ldquo;Create Network Access Scope\u0026rdquo; (Tạo phạm vi truy cập mạng) Từ màn hình Network Access Scopes (Phạm vi truy cập mạng): Chọn hàng chứa phạm vi bạn vừa tạo Chọn \u0026ldquo;Analyze\u0026rdquo; (Phân tích) Phân tích sẽ mất vài phút để hoàn tất. Sau khi hoàn tất, bạn sẽ có thể nhấp để xem kết quả. Bảng bên trái hiển thị tóm tắt các phát hiện. Sơ đồ bên phải màn hình cung cấp phân tích chi tiết về con đường lưu lượng mạng đến EC2 instance. Bảng bên trái có thể cuộn và điều chỉnh kích thước cột để xem chi tiết lưu lượng TCP được phép. Nhấp vào các điểm nhảy trong sơ đồ bên phải để xem thông tin chi tiết về nguồn gốc. Phân tích cho thấy EC2 instance nhận lưu lượng SSH từ internet từ hai địa chỉ: 203.0.113.0/24 (IPv4) và 2001:db8::/32 (IPv6). Phần cuối của phòng thí nghiệm là xóa các quy tắc SSH khỏi nhóm bảo mật. Lưu ý: Đừng lo lắng - phiên bản của bạn chưa bị mở ra cho Internet trong suốt hội thảo này! Hai dải mạng này thực ra không thể định tuyến trên Internet; xem RFC 5735 cho IPv4 và thẻ tham khảo IPv6 của RIPE cho IPv6.\nXóa quy tắc nhóm bảo mật SSH Bây giờ chúng ta đã xác định được quyền truy cập SSH đến, chúng ta nên xóa nó khỏi nhóm bảo mật.\nĐiều hướng đến bảng điều khiển VPC, sau đó tìm LabVpc/publicInstanceSGnhóm bảo mật Nhấp vào tab \u0026ldquo;Inbound rules\u0026rdquo; và chọn \u0026ldquo;Edit inbound rules\u0026rdquo; Lưu ý rằng mặc dù Network Access Analyser hiện chỉ hoạt động với IPv4, bạn có thể thấy rằng một quy tắc SSH cũng đã được cấu hình cho IPv6.\nChọn \u0026ldquo;Delete\u0026rdquo; cho cả quy tắc IPv4 và IPv6, sau đó chọn \u0026ldquo;Save rules\u0026rdquo;. Bây giờ: Quay lại Network Access Analyzer. Chạy lại phân tích cho phạm vi đã tạo. Kết quả: Không có phát hiện nào (vì không còn cách nào khác để lưu lượng Internet tiếp cận các phiên bản, ngoại trừ qua WebAlb). Chúc mừng bạn đã hoàn thành Lab C!\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/4-network-analysis/4.2-labd/4.2.1-wd/",
	"title": "Hướng dẫn Lab D: Phản chiếu lưu lượng mạng VPC",
	"tags": [],
	"description": "",
	"content": "Hãy chắc chắn rằng bạn đang ở đúng khu vực Điều hướng đến trang chủ AWS Console. Hãy đảm bảo ta đang làm việc ở đúng khu vực của mình Configure the mirror target Ghi lại ID ENI của mirrorInstance từ Lab D CloudWatch Dashboard. để sử dụng làm mục tiêu phản chiếu. Từ trang chủ của bảng điều khiển, nhấp vào hộp tìm kiếm và nhập VPC. Từ bảng điều khiển VPC, chọn tùy chọn \u0026ldquo;Mirror targets\u0026rdquo; trong menu, sau đó chọn \u0026ldquo;Create traffic mirror target” Thêm tên và mô tả cho mục tiêu, chọn loại mục tiêu là \u0026ldquo;Network Interface\u0026rdquo; và chọn ENI đã xác định trước, sau đó nhấp vào \u0026ldquo;Create\u0026rdquo;. Configure the mirror filters Ghi lại địa chỉ IP riêng (IPv4 và IPv6) của EC2 mirrorInstance và sử dụng thông tin này khi tạo các quy tắc bộ lọc mirror, với thông tin được lấy từ Lab D CloudWatch Dashboard. Từ bảng điều khiển VPC, chọn tùy chọn \u0026ldquo;Mirror filters\u0026rdquo; trong menu, sau đó nhấp vào liên kết ID bộ lọc của bộ lọc được tạo sẵn (có tên \u0026ldquo;LabDMirrorFilter\u0026rdquo;) để chỉnh sửa bộ lọc đó. Đã có bốn quy tắc được cấu hình; hai quy tắc inbound từ chối (không phản chiếu) lưu lượng phản hồi HTTPS đến từ khối CIDR của VPC (cả IPv4 và IPv6) tới publicInstance; và hai quy tắc outbound từ chối lưu lượng yêu cầu HTTPS từ publicInstance tới khối CIDR của VPC (cả IPv4 và IPv6). Điều này nhằm loại bỏ một số nhiễu phục vụ cho mục đích của bản demo. Chúng ta sẽ thêm bốn quy tắc nữa; hai quy tắc outbound chấp nhận (phản chiếu) các yêu cầu HTTPS từ publicInstance đến Internet (IPv4 và IPv6), và hai quy tắc inbound chấp nhận các phản hồi HTTPS từ Internet (IPv4 và IPv6) đến publicInstance. Truy cập tab \u0026ldquo;Outbound rules\u0026rdquo; và nhấp vào \u0026ldquo;Add outbound rule\u0026rdquo; để thêm các quy tắc outbound. Giữ nguyên số quy tắc là 210 (chúng ta muốn quy tắc này thực thi sau các quy tắc hiện có), giữ hành động của quy tắc là \u0026ldquo;accept\u0026rdquo;. Đặt giao thức là TCP và đặt phạm vi cổng nguồn từ 1024-65535, phạm vi cổng đích là 443. Nhập địa chỉ IPv4 riêng (kèm /32 ở cuối) của publicInstance vào trường CIDR block nguồn, sau đó thêm 0.0.0.0/0 vào trường CIDR block đích, sau đó nhấp vào \u0026ldquo;Add rule\u0026rdquo;. Thêm một quy tắc Outbound thứ hai (lần này cho IPv6). Giữ nguyên số quy tắc là 310, giữ hành động của quy tắc là \u0026ldquo;accept\u0026rdquo;. Đặt giao thức là TCP và đặt phạm vi cổng nguồn từ 1024-65535, phạm vi cổng đích là 443. Nhập địa chỉ IPv6 riêng (kèm /128 ở cuối) của publicInstance vào trường CIDR block nguồn, sau đó thêm ::0/0 vào trường CIDR block đích, rồi nhấp vào \u0026ldquo;Add rule\u0026rdquo;. Nhấp vào tab \u0026ldquo;Inbound rules\u0026rdquo; và chọn \u0026ldquo;Add inbound rule\u0026rdquo; để tạo các quy tắc inbound. Để tạo quy tắc inbound, giữ số quy tắc là 210 (chúng ta muốn quy tắc này chạy sau các quy tắc hiện có), giữ hành động quy tắc là \u0026ldquo;accept\u0026rdquo;. Đặt giao thức là TCP, và thiết lập phạm vi cổng nguồn là 443, và phạm vi cổng đích là 1024-65535. Nhập 0.0.0.0/0 vào trường CIDR block nguồn, và sau đó thêm địa chỉ IPv4 riêng (với /32 ở cuối) của publicInstance vào trường CIDR block đích, sau đó nhấp vào \u0026ldquo;Add rule\u0026rdquo;. Giữ số quy tắc là 310 (chúng ta muốn quy tắc này chạy sau các quy tắc hiện có), giữ hành động quy tắc là \u0026ldquo;accept\u0026rdquo;. Đặt giao thức là TCP, và thiết lập phạm vi cổng nguồn là 443, và phạm vi cổng đích là 1024-65535. Nhập ::0/0 vào trường CIDR block nguồn, và sau đó thêm địa chỉ IPv6 riêng (với /128 ở cuối) của publicInstance vào trường CIDR block đích, sau đó nhấp vào \u0026ldquo;Add rule\u0026rdquo;. Configure the mirror session Ghi lại ID ENI của publicInstance và ID của Virtual Network (308308) từ Lab D CloudWatch Dashboard để sử dụng khi đăng ký làm nguồn phản chiếu. Từ bảng điều khiển VPC, chọn tùy chọn \u0026ldquo;Mirror session\u0026rdquo; trong menu, sau đó nhấp vào nút \u0026ldquo;Create traffic mirror session\u0026rdquo;. Cài đặt tên và mô tả cho phiên, chọn nguồn phản chiếu là ENI của publicInstance và mục tiêu phản chiếu là mục tiêu bạn đã tạo trước đó. Đặt Session number là 1, VNI là \u0026ldquo;308308\u0026rdquo;, để trống packet length, chọn bộ lọc đã cập nhật và nhấn \u0026ldquo;Create\u0026rdquo;. View the packet captures Kết nối với mirrorInstance qua Session Manager bằng liên kết trong phần Liên kết hữu ích của Lab D CloudWatch Dashboard. Kết nối với mirrorInstance, chuyển sang quyền root bằng lệnh sudo bash, và kiểm tra các giao diện mạng bằng lệnh ifconfig -a để xác nhận rằng giao diện vxlan0 đã được cấu hình. Bạn có thể chạy lệnh: tshark -i vxlan0 -Y http -T fields -e ipv6.src -e ipv6.dst -e http.request.method -e http.request. uri -e http.file_data Để xem dữ liệu gói tin HTTP qua IPv6 được phản chiếu đến mirrorInstance. Để lệnh chạy khoảng một phút trước khi thấy lưu lượng, và nhấn Ctrl-C để dừng khi đã có đủ dữ liệu. 4. Bạn thấy một số gói tin được truyền dưới dạng văn bản rõ ràng thay vì được mã hóa. \u0026ldquo;publicInstance\u0026rdquo; đang sử dụng cổng 443 cho kết nối không mã hóa HTTP, và trong các phòng thí nghiệm E và F, chúng ta sẽ tìm hiểu cách cấu hình AWS Network Firewall để phát hiện lưu lượng này tự động.\nChúc mừng bạn đã hoàn thành Lab D!\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/5-network-firewall/5.1-labe/5.1.1-we/",
	"title": "Hướng dẫn Lab E: Thiết lập định tuyến cho Network Firewall",
	"tags": [],
	"description": "",
	"content": "Hãy chắc chắn rằng bạn đang ở đúng khu vực Điều hướng đến trang chủ AWS Console . Hãy đảm bảo ta đang làm việc ở đúng khu vực của mình NFW routing for IPv6 Mục tiêu: Đảm bảo rằng tất cả lưu lượng vào và ra đều được AWS Network Firewall kiểm tra trước khi đến các subnet công cộng và riêng tư. Công việc đã thực hiện: Đã cấu hình một subnet firewall với AWS Network Firewall đã được triển khai. Cần làm tiếp: Thay đổi các bảng định tuyến IPv6 để đảm bảo tất cả lưu lượng vào và ra đều đi qua Network Firewall. Đây là cách các bảng định tuyến sẽ xử lý cấu hình sau Lưu ý: Khi bạn thêm các điểm kết thúc Network Firewall vào một VPC, chúng xuất hiện dưới dạng các điểm kết thúc Gateway Load Balancer (về mặt kỹ thuật, AWS Network Firewall sử dụng Gateway Load Balancer). Bảng điều khiển CloudWatch sẽ giúp bạn xác định các ID điểm kết thúc chính xác.\nAdd default route via IGW to the FW route tables Trong AWS Management Console, hãy bắt đầu nhập VPC vào hộp tìm kiếm nhanh và nhấn Enter : Vào VPC → Route Tables và lọc theo LabVpc ở hộp bên trái. Chọn LabVpc/FwSubnet1RouteTable và nhấp vào tab Routes. Nhấp vào Edit Routes Thêm tuyến đường và cấu hình sao cho tất cả lưu lượng phải đi qua cổng internet. Destination: ::/0 Target: igw-xxxx.. Bây giờ, hãy lặp lại các bước từ 1 đến 4 cho bảng định tuyến \u0026ldquo;LabVpc/FwSubnet2RouteTable\u0026rdquo;. Create and Configure Edge Route Table Vào VPC → Bảng định tuyến và nhấp vào Tạo bảng định tuyến ở góc trên bên phải. Tên: LabVpc/Edge VPC: vpc-xxx (LabVpc) Nhấp vào Tạo bảng định tuyến. Click on Edit on routes Thêm 2 tuyến đường mới\nĐiểm đến: Kiểm tra Bảng điều khiển CloudWatch cho Public Subnet CIDR (IPv6) trong AZ1 Mục tiêu: Kiểm tra Bảng điều khiển CloudWatch để biết ID Điểm cuối NFW trong AZ1 Điểm đến: Kiểm tra Bảng điều khiển CloudWatch để biết Public Subnet CIDR (IPv6) trong AZ2 Mục tiêu: Kiểm tra Bảng điều khiển CloudWatch để biết ID Điểm cuối NFW trong AZ2 Theo cách thực hành tốt nhất, định tuyến từ một mạng con nên đi qua điểm cuối GWLB trong cùng một Vùng khả dụng (AZ). Đi đến Bảng điều khiển Lab E CloudWatch để kiểm tra điểm cuối GWLB chính xác cho mỗi mạng con.\nBạn sẽ thấy hai tuyến mới với điểm cuối GWLB VPC của Tường lửa mạng làm mục tiêu. Trên tab Liên kết cạnh, hãy nhấp vào Edit edge association Sau đó chọn Cổng Intenet và Save Changes\nModify Public subnets route tables Vào VPC → Bảng định tuyến và lọc theo LabVpc. Chọn LabVpc/PubSubnet1RouteTable và nhấp vào tab Routes. Nhấp vào Chỉnh sửa Định tuyến. Chúng ta cần sửa đổi quy tắc ::/0. Xóa IGW làm mục tiêu và nhấp vào Điểm cuối của Bộ cân bằng tải cổng. Để thực hành tốt nhất, điểm cuối được chọn cần phải nằm trong cùng AZ với mạng con mà bảng định tuyến được liên kết. Đi đến Bảng điều khiển Lab E CloudWatch để kiểm tra điểm cuối GWLB chính xác cho mỗi mạng con. Thêm tuyến đường và bây giờ cấu hình để tất cả lưu lượng truy cập phải đi đến Tường lửa mạng trước khi rời khỏi VPC Destination: ::/0 Target: vpce-xxxx Đây là cách bảng định tuyến của bạn sẽ trông như thế nào. Xin lưu ý rằng chúng tôi chỉ cấu hình các tuyến đường cho IPv6, do đó IPv4 vẫn trỏ đến IGW, trong khi IPv6 trỏ đến điểm cuối NFW.\nBây giờ, lặp lại các bước 1-4 cho LabVpc/PubSubnet2RouteTable. Chúc mừng bạn đã hoàn thành Lab E!\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/6-gwlb/6.1-labg/6.1.1-wg/",
	"title": "Hướng dẫn Lab G: Cấu hình dịch vụ Gateway Load Balancer",
	"tags": [],
	"description": "",
	"content": "Chúng ta muốn thiết lập AWS Gateway Load Balancer (GWLB) để kiểm tra tất cả lưu lượng vào và ra trước khi nó đến các subnet công cộng và riêng tư. Để làm điều đó, chúng ta cần tạo một GWLB trong VPC GWLB, và GWLB này sẽ trỏ đến AutoScaling Group (ASG) chạy Suricata. Sau cấu hình này, các bảng định tuyến sẽ được cập nhật để đảm bảo tất cả lưu lượng đi qua GWLB. Create Target Group Trong AWS Management Console, gõ \u0026ldquo;EC2\u0026rdquo; vào hộp tìm kiếm nhanh và nhấn Enter: Đi tới Load Balancing → Target Group và nhấp vào Create Target Group. Dưới phần Basic configuration: Choose a target type: Instances Target group name: netvpc-TG-GWLB Protocol: Port: GENEVE VPC: GwlbVpc Trong Health check protocol - chọn HTTP và đặt / dưới phần path. Nhấp vào Next. Trong mục Available instances, không chọn bất kỳ thứ gì, sau đó nhấp vào Create target group. Nhấp vào Create target group. Create Gateway Load Balancer Trong AWS Management Console, bắt đầu nhập \u0026ldquo;EC2\u0026rdquo; vào hộp tìm kiếm nhanh và nhấn Enter. Đi tới Load Balancing → Load Balancer và nhấp vào Create load balancer. Chọn Gateway Load Balancer và nhấp vào Create. Thiết lập các chi tiết sau: Load balancer name: GWLB IP address type: IPV4 VPC: GwlbVpc Subnets: GwlbVpc/PriSubnet1 \u0026amp; GwlbVpc/PriSubnet2 IP listener routing: netvpc-TG-GWLB (the one created in the previous step) Click in Create load balancer Associate the ASG with the Gateway Load Balancer Trong AWS Management Console, bắt đầu gõ EC2 vào ô tìm kiếm nhanh và nhấn Enter: Nhấp vào Autoscaling Groups trong menu bên trái. Nhấp vào netwks-SuricataAutoScalingGroup. Trong tab Details, cuộn xuống mục Load balancing và nhấp vào Edit. Cuộn xuống mục Load balancers: Nhấp vào Application, Network or Gateway Load Balancer target groups. Chọn GWLB đã tạo ở bước trước. Click Update Create GWLB Endpoint Service Đi đến VPC → Endpoint Services và nhấp vào Create endpoint service ở góc trên bên phải. Name: GWLB-Endpoint Load balancer type: Gateway Available load balancers: GWLB (load balancer created in previous step) Acceptance required: should be un-ticked Supported IP address types: IPv4 Nhấp vào Create. Sau khi tạo xong, sao chép tên dịch vụ vào một ứng dụng ghi chú; bạn sẽ cần nó cho phòng thí nghiệm tiếp theo. Chúc mừng bạn đã hoàn thành Lab G!\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/6-gwlb/6.2-labh/6.2.1-wh/",
	"title": "Hướng dẫn Lab H: Thiết lập định tuyến cho Gateway Load Balancer",
	"tags": [],
	"description": "",
	"content": "Configuring Tạo GWLB Endpoint: Tạo một GWLB endpoint trong mỗi subnet Firewall (FW) ở LabVpc để chuyển hướng lưu lượng. Cập nhật bảng định tuyến: Thay đổi các bảng định tuyến để đảm bảo rằng tất cả lưu lượng đi đến hoặc từ IGW được kiểm tra bởi firewall Suricata. Firewall Suricata đã được cấu hình sẵn với hai quy tắc: Quy tắc đầu tiên chặn lưu lượng đến https://www.facebook.com. Quy tắc thứ hai chặn ICMP ping đến 9.9.9.9.\nCreate Endpoint in LabVpc Đến VPC -\u0026gt; Endpoints và click tạo Endpoint Name: GWLB-endpoint-1 Service Category: Other Endpoint services Service Settings: paste the GWLB\u0026rsquo;s \u0026lsquo;service name created in the previous lab. Nếu bạn không ghi chú lại tên endpoint của mình, hãy nhấp vào liên kết here và kiểm tra tên dịch vụ trong tab Chi tiết.\nNhấp vào \u0026ldquo;Verify Service\u0026rdquo;. Nó sẽ hiển thị thông báo xác nhận tên dịch vụ. Kiểm tra Subnet Sau khi xác nhận, bạn sẽ có tùy chọn chọn VPC. VPC: Chọn LabVpc. Subnets: Chọn LabVpc/FWSubnet1. Click Create Mặc dù có thể chọn nhiều subnet tại bước này, mỗi endpoint của GWLB chỉ có thể được liên kết với một subnet duy nhất. Do đó, bạn cần tạo hai endpoint GWLB, mỗi endpoint cho một AZ khác nhau.\nLặp lại các bước trên cho subnet LabVpc/FWSubnet2 Đi đến VPC -\u0026gt; Endpoint Services. Nhấp vào GWLB-Endpoint. Chọn tab \u0026ldquo;Endpoint connections\u0026rdquo;. Chọn điểm cuối mà bạn muốn chấp nhận yêu cầu kết nối. Nhấp vào \u0026ldquo;Actions\u0026rdquo; và chọn \u0026ldquo;Accept endpoint connection request\u0026rdquo;. Add default route via IGW to the FW route tables Đây là cách các bảng định tuyến sẽ xử lý cấu hình sau: Trong AWS Management Console, bắt đầu gõ \u0026ldquo;VPC\u0026rdquo; vào ô tìm kiếm nhanh ở trên cùng và nhấn Enter. Đi đến VPC → Bảng định tuyến (Route Tables) và lọc theo LabVpc. Chọn LabVpc/FwSubnet1RouteTable và nhấp vào tab Routes. Nhấp vào Edit Routes. Thêm một tuyến đường và cấu hình để tất cả lưu lượng truy cập nên đi đến internet gateway. Destination: 0.0.0.0/0 Target: igw-xxxx.. Làm lại các bước trên cho LabVpc/FwSubnet2RouteTable Chúc mừng bạn đã hoàn thành Lab H!\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/7-waf/7.1-labi/7.1.1-wi/",
	"title": "Hướng dẫn Lab I: Bảo vệ ứng dụng web",
	"tags": [],
	"description": "",
	"content": "Hãy chắc chắn rằng bạn đang ở đúng khu vực Điều hướng đến trang chủ AWS Console . Hãy đảm bảo ta đang làm việc ở đúng khu vực của mình Adding a CloudFront global prefix list to the WebAlb Đến VPC Chọn \u0026ldquo;Managed prefix lists\u0026rdquo; Tìm trong \u0026ldquo;Managed prefix lists\u0026rdquo; có dòng này: com.amazonaws.global.cloudfront.origin-facing Ghi lại một vài ký tự cuối cùng của ID danh sách tiền tố (bạn sẽ cần điều này sau) - trong ví dụ này, nó sẽ là 4526 Từ VPC, chuyển đến Security Groups. Chọn box bên cạnh \u0026ldquo;LabVpc/webAlbSG\u0026rdquo; trong security group Chọn tab \u0026ldquo;Inbound rules\u0026rdquo; trong bảng bên dưới, sau đó nhấp vào \u0026ldquo;Edit inbound rules\u0026rdquo; (Chỉnh sửa các quy tắc inbound). Nhấp vào \u0026ldquo;Add rule\u0026rdquo; Type: HTTP Source: Custom sau đó nhấp vào hộp tìm kiếm Tìm \u0026ldquo;Prefix lists\u0026rdquo; có ký tự như trong ví dụ này là 4526 Chọn nó, sau đó thêm mô tả tùy chọn - trong ví dụ này là \u0026ldquo;Inbound TCP:80 from CloudFront\u0026rdquo;. Nhấp vào \u0026ldquo;Save rules\u0026rdquo; (Lưu quy tắc). Xác nhận rằng quy tắc của bạn đã có trong danh sách Inbound rules (quy tắc đầu vào). Configuring AWS WAF Từ trang chính của bảng điều khiển, nhấp vào ô tìm kiếm và gõ \u0026ldquo;WAF\u0026rdquo; Từ bảng điều khiển WAF chọn tùy chọn \u0026ldquo;Web ACLs\u0026rdquo; từ menu bên trái Nhớ đảm bảo Region mà bạn đang thực hiện. Nhấp vào \u0026ldquo;Create web ACL\u0026rdquo;. Bước 1: Tên Web ACL: \u0026ldquo;netwks-webacl\u0026rdquo; Mô tả: Như bạn muốn Tên metric CloudWatch: \u0026ldquo;netwks-webacl\u0026rdquo; Loại tài nguyên: Regional resources Vùng: Đảm bảo là vùng bạn đang làm việc Nhấp vào \u0026ldquo;Next\u0026rdquo; để tiếp tục. Bước 2: Thêm quy tắc mới. Từ phần Quy tắc, nhấp vào \u0026ldquo;Add rules\u0026rdquo;. Chọn \u0026ldquo;Add my own rules and rule groups\u0026rdquo;. Điều này sẽ đưa bạn đến màn hình \u0026ldquo;Add my own rules and rule groups\u0026rdquo;. Đảm bảo rằng tùy chọn \u0026ldquo;Rule builder\u0026rdquo; được chọn. Thêm tên cho quy tắc (ví dụ, \u0026ldquo;netwks-rule01\u0026rdquo;). Đảm bảo quy tắc là \u0026ldquo;regular rule\u0026rdquo;. Tiếp tục xây dựng quy tắc: Cấu hình quy tắc để kích hoạt khi yêu cầu \u0026ldquo;matches the statement\u0026rdquo;. Chọn kiểm tra một tiêu đề, và nhập \u0026ldquo;originsig\u0026rdquo; làm tên trường tiêu đề. Chọn loại so khớp là \u0026ldquo;Exactly matches string\u0026rdquo;, và cung cấp \u0026ldquo;vpcsecurity\u0026rdquo; làm chuỗi để so khớp. Đảm bảo rằng biến đổi văn bản được đặt thành \u0026ldquo;Lowercase\u0026rdquo;. Phần cuối cùng của quy tắc: Chọn \u0026ldquo;Allow\u0026rdquo; (Cho phép) làm hành động, và để các phần khác ở giá trị mặc định. Nhấn \u0026ldquo;Add rule\u0026rdquo; (Thêm quy tắc) để quay lại trang Bước 2. Tại đây, cấu hình hành động mặc định của Web ACL: Chặn bất kỳ yêu cầu nào không khớp với quy tắc. Tùy chọn: Cấu hình mã phản hồi tùy chỉnh và thông điệp. Ví dụ, sử dụng mã phản hồi HTTP 403 và chọn tạo nội dung phản hồi tùy chỉnh. Nội dung phản hồi tùy chỉnh: Bạn có thể trả về JSON, HTML hoặc văn bản thuần túy. Ví dụ, đã tạo một nội dung phản hồi tùy chỉnh gọi là \u0026ldquo;netwks-denied\u0026rdquo;, trả về phản hồi HTML với thông điệp: \u0026lt;strong\u0026gt;Invalid CloudFront distribution used to request this resource\u0026lt;/strong\u0026gt;. Nhấn \u0026ldquo;Save\u0026rdquo; (Lưu) và hoàn tất Bước 2 bằng cách nhấn \u0026ldquo;Next\u0026rdquo; (Tiếp theo). Các bước tiếp theo: Bước 3: Với chỉ một quy tắc, không cần thay đổi ưu tiên. Nhấn \u0026ldquo;Next\u0026rdquo; (Tiếp theo). Bước 4 (Cấu hình số liệu): Để tùy chọn mặc định không thay đổi và nhấn \u0026ldquo;Next\u0026rdquo; (Tiếp theo). Bước 5: Xem lại các tùy chọn đã thiết lập và nhấn \u0026ldquo;Create web ACL\u0026rdquo; (Tạo web ACL). AWS WAF có thể mất vài phút để hoàn tất các nhiệm vụ cần thiết - không rời khỏi trang trong khi quá trình này đang diễn ra. Bước tiếp theo: Để liên kết web ACL với tài nguyên, từ danh sách Web ACL, nhấn vào tên \u0026ldquo;netwks\u0026rdquo; để xem trang chi tiết của Web ACL. Trong tab \u0026ldquo;Associated AWS resources\u0026rdquo; (Tài nguyên AWS đã liên kết), nhấn vào \u0026ldquo;Add AWS resources\u0026rdquo; (Thêm tài nguyên AWS) Bước tiếp theo: Chọn \u0026ldquo;Application Load Balancer\u0026rdquo;, sau đó chọn \u0026ldquo;WebAlb\u0026rdquo; và nhấn \u0026ldquo;Add\u0026rdquo; (Thêm). Việc này có thể mất một hoặc hai phút để hoàn thành. Sau khi hoàn tất, bạn có thể kiểm tra web ACL bằng cách truy cập vào hai phân phối CloudFront khác nhau đã được tạo. Chúc mừng bạn đã hoàn thành Lab I!\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/1-introduce/1.1-architecture/",
	"title": "Kiến Trúc",
	"tags": [],
	"description": "",
	"content": "Sơ đồ kiến trúc Tổng quan về kiến trúc ban đầu được hiển thị bên dưới: Hội thảo tập trung vào \u0026ldquo;LabVpc\u0026rdquo;, mô phỏng hạ tầng với hai Vùng sẵn sàng (AZ) và triển khai 4 tầng mạng: Mạng con công cộng (PubSubnets): Có tuyến đường mặc định đến Cổng Internet, chứa NAT Gateway, Application Load Balancer (webAlb), và EC2 instance. Mạng con riêng (PriSubnets): Có tuyến mặc định đến các cổng NAT trong PubSubnets, chứa Auto Scaling Group cho máy chủ web EC2 và một EC2 để xử lý lưu lượng phản chiếu (mirrorInstance). Mạng con bị cô lập (EndSubnets): Không có tuyến mặc định, chứa các điểm cuối PrivateLink cho AWS services như CloudFormation, CloudWatch, và Systems Manager. Mạng con tường lửa (FwSubnets): Chưa có tuyến mặc định nhưng sẽ dùng AWS Network Firewall sau này. Một số thành phần khác đã được triển khai sẵn, như AWS Network Firewall, Amazon CloudFront (có webAlb làm gốc), và CloudWatch Log Groups. Liên kết đến các tài nguyên này có thể tìm thấy trên CloudWatch Dashboard sau khi đăng nhập vào tài khoản AWS hoặc triển khai CloudFormation stack vào tài khoản cá nhân.\nCơ sở hạ tầng bổ sung Hội thảo sử dụng một VPC bổ sung (ExtVpc) để mô phỏng các mục tiêu Internet, chứa mạng con công khai và một ALB hướng tới Internet. ALB này cung cấp phản hồi Lambda đơn giản để cung cấp thông tin.\nNgoài ra, một số hàm Lambda được chạy mỗi phút thông qua Amazon EventBridge để theo dõi trạng thái của cơ sở hạ tầng hội thảo và kiểm tra các tác vụ đã hoàn thành.\nKhông cần thay đổi bất kỳ thành phần nào của cơ sở hạ tầng bổ sung trong suốt hội thảo.\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/3-dns-security/3.1-laba/",
	"title": "Lab A: Tăng cường khả năng hiển thị hoạt động của VPC",
	"tags": [],
	"description": "",
	"content": "Tổng quan: Nhận thông báo từ bên thứ ba về hoạt động đáng ngờ đến từ bên ngoài trong cơ sở hạ tầng cá nhân. Nhiệm vụ đầu tiên: Bật ghi nhật ký truy vấn DNS để nắm bắt các yêu cầu truy vấn DNS. Mục tiêu: Xác định nguồn và đích của các truy vấn để điều tra hoạt động đáng ngờ. Việc này sẽ hỗ trợ trong việc theo dõi và xử lý các sự cố bảo mật liên quan đến truy vấn DNS.\nĐiểm khởi đầu: Hãy xem xét cách ta có thể nắm bắt và ghi lại các truy vấn DNS trong VPC của mình, sau đó cách bạn có thể phân tích các nhật ký đó để tìm kiếm hoạt động đáng ngờ. Một số trường hợp sẽ hữu ích để tạo các truy vấn của riêng bạn là:\nquery_name: tên miền đang được truy vấn (ví dụ: test.example.com.) srcids.instance: id phiên bản EC2 đã thực hiện truy vấn rcode: mã phản hồi được tạo ra bởi trình phân giải Route 53 để phản hồi truy vấn DNS answers.0.Rdata: phản hồi của truy vấn (IPv4 hoặc IPv6) Các truy vấn mẫu có thể được tìm thấy ở đây.\nCơ sở hạ tầng được triển khai trước Có một Amazon Cloudwatch Log Group ( \u0026quot;Route53Resolver\u0026quot;) được cấu hình sẵn mà ta có thể sử dụng khi cấu hình ghi nhật ký truy vấn DNS. Hãy nhớ kiểm tra xem bảng điều khiển cá nhân có hiển thị ta đang làm việc ở đúng vùng cho hội thảo hay không.\nDịch vụ được sử dụng Ghi nhật ký truy vấn DNS Resolver của Amazon Route 53 - Tài liệu Amazon CloudWatch Log Insights - Tài liệu Tiêu chí thành công Bạn đã bật thành công khả năng ghi nhật ký truy vấn DNS cho LabVpc VPC.\nBạn đã xác định được tên DNS của trang web không xác định mà bạn nghi ngờ là có vấn đề\nĐảm bảo rằng tất cả các tác vụ được xác định trên Bảng điều khiển Lab A CloudWatch đã được hoàn thành.\nGợi ý Để bật ghi nhật ký truy vấn\nNhật ký truy vấn cho VPC được tìm thấy trong Amazon Route 53 Resolver phần của bảng điều khiển AWS. + Hãy đảm bảo bạn đã chuyển sang khu vực nơi xưởng của bạn đang hoạt động. Để phân tích nhật ký truy vấn Sau khi bạn ghi lại nhật ký, bạn có thể bắt đầu chạy truy vấn đối với dữ liệu bằng CloudWatch Log Insights. Một số trường sẽ hữu ích cho việc tạo truy vấn của riêng bạn là: query_name: tên miền đang được truy vấn (ví dụ: \u0026ldquo;test.example.com.\u0026rdquo;) srcids.instance: id phiên bản EC2 đã thực hiện truy vấn rcode: mã phản hồi được tạo ra bởi trình phân giải Route 53 để phản hồi truy vấn DNS answers.0.Rdata: phản hồi của truy vấn (IPv4 hoặc IPv6) Các truy vấn ví dụ có thể được tìm thấy ở đây Nếu bạn đang gặp khó khăn, chúng tôi đã tạo một số truy vấn được lưu trước trong hội thảo - bạn có thể tìm thấy chúng trong trang Log Insights, ở phía bên phải, nút bên dưới nút \u0026ldquo;Discovered Fields\u0026rdquo; Lưu ý rằng có thể mất vài phút từ lúc bật ghi nhật ký truy vấn đến lúc kết quả xuất hiện trong CloudWatch Logs Insights - hãy kiên nhẫn!\nKiến trúc Phòng thí nghiệm A Hướng đẫn Lab A\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/4-network-analysis/4.1-labc/",
	"title": "Lab C: Phân tích cấu hình mạng VPC",
	"tags": [],
	"description": "",
	"content": "Mục tiêu Sau khi phát hiện lưu lượng DNS đáng ngờ trong LabVpc, ta cần kiểm tra cấu hình bảo mật để xác định tài nguyên VPC nào có thể nhận kết nối từ internet. Mục tiêu là đảm bảo các tài nguyên này đáp ứng yêu cầu tuân thủ và bảo mật. Nếu phát hiện truy cập không mong muốn, ta sẽ cần xóa nó. Khởi điểm AWS cung cấp các công cụ để giúp ta xác định và hiển thị quyền truy cập được phép vào VPC của mình dựa trên cấu hình hiện tại, thay vì phải kiểm tra thủ công từng nhóm bảo mật và cấu hình Network ACL trong các môi trường lớn. Dịch vụ sử dụng Trình phân tích truy cập mạng Amazon VPC - Tư liệu Tiêu chí thành công Xác định các biện pháp kiểm soát truy cập VPC cho phép kết nối không mong muốn (ví dụ: cổng SSH mở Internet) vào VPC và xóa quyền truy cập này. Gợi ý Để tìm thông tin chuyên sâu về cấu hình truy cập mạng\nPhân tích truy cập mạng có thể được tìm thấy trong bảng điều khiển Trình quản lý mạng. Mặc dù bạn có thể sử dụng phạm vi mặc định của AWS, nhưng bạn có thể nhận được nhiều kết quả không liên quan đến phòng thực hành. Hãy suy nghĩ về cách bạn có thể thu hẹp phạm vi đến LabVpc. Nếu bạn muốn có một mục tiêu kéo dài, cũng hãy suy nghĩ về cách bạn có thể loại trừ lưu lượng truy cập \u0026ldquo;tốt đã biết\u0026rdquo; khỏi phân tích. Lưu ý rằng (kể từ tháng 11/2023), Network Access Analyzer chỉ hỗ trợ phân tích IPv4.\nKiến trúc phòng thí nghiệm C Hướng dẫn Lab C\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/5-network-firewall/5.1-labe/",
	"title": "Lab E: Thiết lập định tuyến cho Network Firewall",
	"tags": [],
	"description": "",
	"content": "Mục tiêu Bạn cần cấu hình một tường lửa để kiểm tra toàn bộ lưu lượng IPv6 đáng ngờ vào và ra khỏi mạng LabVpc do có báo cáo về hoạt động bất thường. Điểm khởi đầu Bạn cần cấu hình bảng định tuyến để đảm bảo lưu lượng vào và ra VPC đi qua các điểm cuối AWS Network Firewall trong FwSubnets để kiểm tra. Cơ sở hạ tầng AWS Network Firewall (với các điểm cuối trong mỗi AZ). LabVpc/FwSubnet1 \u0026amp; LabVpc/FwSubnet2 (một cái trong mỗi AZ). Dịch vụ được sử dụng Amazon VPC - Route Tables Documentation AWS Network Firewall Documentation\nTiêu chí thành công Cấu hình bảng định tuyến IPv6 cho VPC để đảm bảo rằng tất cả lưu lượng truy cập vào/ra đều được kiểm tra bởi AWS Network Firewall. Đảm bảo rằng các điểm cuối của firewall được liên kết đúng cách với VPC và các subnet liên quan. Kiểm tra khả năng truy cập internet từ publicInstance sau khi cập nhật bảng định tuyến. Gợi ý Working with IPv6\nLàm việc với IPv6 Nếu bạn chưa từng làm việc với IPv6 trước đây, có một vài điều cần nhớ:\nĐường định tuyến mặc định cho IPv6 là ::/0 (tương đương với 0.0.0.0/0 cho IPv4). Khi phân bổ một khối CIDR IPv6 cho VPC, VPC sẽ nhận được một khối địa chỉ IPv6 công cộng /56; mỗi subnet sẽ nhận được một phân bổ /64 từ khối này. Working with VPC routing\nĐể cấu hình định tuyến trong VPC, hãy nghĩ về từng bước nhảy của gói tin từ điểm xuất phát đến đích. Bước nhảy tiếp theo được xác định bởi các tuyến trong bảng định tuyến của subnet. Hãy hỏi nhân viên AWS nếu gặp khó khăn. Ingess Route table Configure the Ingress Route table Ingress Routing\nKiến trúc phòng thí nghiệm E Hướng dẫn Lab E\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/6-gwlb/6.1-labg/",
	"title": "Lab G: Cấu hình dịch vụ Gateway Load Balancer",
	"tags": [],
	"description": "",
	"content": "Mục tiêu Nhóm bảo mật của bạn đã tạo một VPC Gateway Load Balancer (GwlbVpc) và cài đặt Suricata, một tường lửa mã nguồn mở trên một cụm ECS. Nhiệm vụ của bạn bây giờ là cấu hình dịch vụ Gateway Load Balancer, sẵn sàng để sử dụng trong LabVpc ở Lab H. Cơ sở hạ tậng đã được triễn khai sẵn Bạn sẽ tìm thấy một nhóm tự động mở rộng (netwks-Suricata\u0026hellip;) kết nối với cụm Dịch vụ Container Co giãn (ECS) đang chạy tường lửa Suricata. Những thành phần này đã được triển khai vào một VPC riêng biệt (GwlbVpc). Dịch vụ được sủ dụng AWS Gateway Load Balancer and Amazon VPC Tiêu chí thành công Bạn đã tạo một nhóm mục tiêu (Target Group) sử dụng giao thức GENEVE (giao thức được sử dụng bởi AWS Gateway Load Balancer - GWLB). Bạn đã cấu hình thành công AWS Gateway Load Balancer trong VPC GWLB. Bạn đã liên kết thành công nhóm tự động mở rộng (ASG) với GWLB. Bạn đã tạo thành công một dịch vụ điểm cuối GWLB (GWLB endpoint service). Gợi ý Create Gateway Load Balancer\nConfigure the Gateway Load Balancer GWLB Create GWLB endpoint Service\nCreate an endpoint service using your Gateway Load Balancer Endpoint to the relevant subnets. Kiến trúc phòng thí nghiệm G Hướng dẫn Lab G\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/7-waf/7.1-labi/",
	"title": "Lab I: Bảo vệ ứng dụng web",
	"tags": [],
	"description": "",
	"content": "Mục tiêu Bảo vệ WebAlb: Đảm bảo rằng toàn bộ lưu lượng truy cập đến WebAlb (Application Load Balancer) chỉ đến từ một Amazon CloudFront distribution, không phải từ các người dùng khác (ngoại trừ từ máy tính cá nhân của bạn). Giới hạn lưu lượng từ CloudFront cụ thể: Chỉ cho phép lưu lượng từ một CloudFront distribution cụ thể được phép truy cập WebAlb, thay vì bất kỳ CloudFront distribution nào có thể biết đến WebAlb. Điểm khởi đầu Đảm bảo Lưu lượng Đến WebAlb chỉ từ CloudFront: Xem xét các phương pháp để đảm bảo rằng tất cả lưu lượng truy cập đến WebAlb chỉ đến từ cơ sở hạ tầng CloudFront. Sử dụng AWS WAF để Kiểm Tra Lưu lượng L7: Sau khi đảm bảo lưu lượng chỉ đến từ CloudFront, cân nhắc sử dụng dịch vụ AWS WAF để kiểm tra lưu lượng ở tầng 7 (L7) và xác nhận rằng yêu cầu đến từ CloudFront distribution mà bạn kiểm soát. Cơ sở hạ tầng triển khai trước Application Load Balancer (WebAlb): Là một Application Load Balancer hướng Internet, đang lắng nghe trên cổng HTTP 80. Phía sau WebAlb có một số instances EC2 cung cấp nội dung. Amazon CloudFront distribution: Đã được cấu hình để chèn một tiêu đề HTTP tùy chỉnh vào các yêu cầu nó gửi đến cơ sở hạ tầng gốc (WebAlb). CloudFront distribution thứ hai: Không được cấu hình để chèn tiêu đề tùy chỉnh (dùng cho mục đích kiểm soát và demo). Lưu ý: Các CloudFront distributions sẽ trả về lỗi 504 lúc đầu, điều này là bình thường và sẽ được khắc phục sau khi hoàn thành nhiệm vụ đầu tiên.\nDịch vụ được sử dụng Amazon CloudFront - Documentation AWS Web Application Firewall (WAF) - Documentation Amazon VPC Security Groups Tiêu chí thành công Đảm bảo rằng Application Load Balancer (WebAlb) có thể truy cập được từ các Amazon CloudFront distributions và từ laptop của bạn Ngoài ra, đảm bảo rằng WebAlb chỉ có thể truy cập từ Amazon CloudFront distribution chứa custom HTTP header. Gợi ý Restricting traffic to CloudFront distributions\nCloudFront có các node trên toàn cầu, và địa chỉ IP của chúng có thể được tìm thấy trực tuyến here. Trước đây, người dùng phải tự thêm các địa chỉ IP này vào security group. AWS hiện cung cấp một managed prefix list, giúp tự động hóa quá trình này. Filtering by HTTP header on the WebAlb Application Load Balancer\nCloudFront được cấu hình chèn tiêu đề \u0026ldquo;OriginSig\u0026rdquo; vào các yêu cầu đến ALB. ALB không có khả năng lọc lưu lượng theo tiêu đề nhưng có thể liên kết với AWS WAF [here]. Tạo quy tắc trong AWS WAF để chặn lưu lượng không có tiêu đề \u0026ldquo;OriginSig\u0026rdquo;[here]. Kiến trúc phòng thích nghiệm I Hướng dẫn Lab I\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/1-introduce/",
	"title": "Tổng quan về Hội Thảo",
	"tags": [],
	"description": "",
	"content": "Tiếp cận Hội thảo xoay quanh kiến trúc Amazon VPC với các thử thách dựa trên tình huống thực tế. Mỗi thử thách (Lab) cung cấp mục tiêu, điểm bắt đầu, và dịch vụ đề xuất. Có gợi ý và hướng dẫn chi tiết nếu cần. Mỗi Lab có bảng điều khiển CloudWatch riêng, chứa hướng dẫn bổ sung và liên kết tài nguyên đã triển khai. Góc trên bên phải của bảng điều khiển hiển thị số lượng nhiệm vụ đã hoàn thành. Phải hoàn thành hết nhiệm vụ của Lab đầu tiên trước khi chuyển sang Lab tiếp theo. Lưu ý: Nếu có cảnh báo về tiện ích tùy chỉnh khi tải bảng điều khiển, nhấp \u0026ldquo;Execute them all\u0026rdquo; để theo dõi tiến trình. Cấu Trúc Hội Thảo Nhóm: Bảo Mật DNS\nLab A: Tăng cường khả năng hiển thị hoạt động của VPC Lab B: Triển khai tường lửa DNS Nhóm: Phân Tích Mạng\nLab C: Phân tích cấu hình mạng VPC Lab D: Phản chiếu lưu lượng mạng VPC Nhóm: Tường Lửa Mạng AWS\nLab E: Thiết lập định tuyến cho Network Firewall Lab F: Cấu hình các quy tắc của AWS Network Firewall Nhóm: Tường Lửa Bên Thứ Ba Sử Dụng Gateway Load Balancer (GWLB)\nLab G: Cấu hình dịch vụ Gateway Load Balancer Lab H: Thiết lập định tuyến cho Gateway Load Balancer Nhóm: Tường Lửa Ứng Dụng Web\nLab I: Bảo vệ ứng dụng web Nội dung Kiến trúc Nhiệm Vụ Giới Thiệu: Quản Lý Kiểm Soát Truy Cập VPC Ở Quy Mô Lớn Hướng đẫn chi tiết "
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/2-prepare/",
	"title": "Các bước chuẩn bị",
	"tags": [],
	"description": "",
	"content": "Chuẩn bị Triển khai các tài nguyên bằng cách tạo CloudFormation từ file liên kết tại đây trong tài khoản AWS cá nhân (chi phí ước tính $1,50-$2,00 mỗi giờ). Thực hiện dọn dẹp sau khi hoàn thành hội thảo để tránh phát sinh chi phí. Sử dụng tài khoản AWS dành riêng cho việc học tập và thử nghiệm, không phải tài khoản chứa tài nguyên sản xuất. Các quyền IAM cần thiết để triển khai và dọn dẹp được liệt kê tại đây. Khi triển khai mẫu CloudFormation, chấp nhận tất cả thiết lập mặc định. Quá trình triển khai mất 15-20 phút. Khi the stacks hiển thị trạng thái Create_Complete, tiếp tục đến phần Tổng quan về Hội thảo. Lưu ý về chi phí tài nguyên:\nNếu chúng ta sử dụng tài khoản AWS của cá nhân, phải thực hiện các bước dọn dẹp vào cuối hội thảo để ngừng các khoản phí cho các dịch vụ đã sử dụng trong hội thảo. Thiết bị:\nĐể hoàn thành hội thảo này, chúng ta sẽ cần có máy tính xách tay cá nhân. Máy tính này cần có quyền truy cập Internet để kết nối qua HTTPS và HTTP. "
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/5-network-firewall/5.2-labf/5.2.2-dns/",
	"title": "Drop DNS Traffic",
	"tags": [],
	"description": "",
	"content": "Detailed Instructions Go to the VPC console and in the left menu, go to Firewall policies under Network firewall. You will find an NFWPolicy, created as part of the initial setup. Click on it and go to the Stateless rule groups, then click on Actions -\u0026gt; Create stateless rule group. In step 1 - click Next. In step 2, enter the following values: Name: DropDNS Capacity: 100 Click Next Under Stateless rule Protocol: 6 (TCP), 17 (UDP) Source: Any IPv6 address Source port range: Any port Destination port range: Custom, then enter 53 Destination: Any IPv6 address Rule Action: Drop Note: Before clicking next, make sure you can see the newly created rule.\nClick Next for steps 4, 5 and Create rule group for step 5. Testing "
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/3-dns-security/3.2-labb/",
	"title": "Lab B: Triển khai tường lửa DNS",
	"tags": [],
	"description": "",
	"content": "Tổng Quan: Xác định trang web đáng ngờ: \u0026ldquo;\u0026ldquo;bad.sa-demos.net\u0026rdquo;\u0026rdquo; là mục tiêu của nhiều lưu lượng truy cập. Nhiệm vụ tiếp theo: Chặn trang web này để ngăn truy cập trong khi tiếp tục điều tra. Giải pháp: Triển khai và cấu hình cơ chế để ngăn các phiên bản trong VPC có thể phân giải tên miền đó. Mục tiêu là tạm thời chặn truy cập vào tên miền đáng ngờ từ VPC nhằm đảm bảo an toàn trong quá trình điều tra.\nĐiểm khởi đầu: Có nhiều cách tiếp cận để từ chối quyền truy cập vào miền đáng ngờ, như nhóm bảo mật VPC hoặc ACL mạng, nhưng chúng chỉ chặn lưu lượng đến các địa chỉ IP cụ thể. Nếu trang web độc hại chuyển sang địa chỉ IP khác, các lệnh chặn này sẽ mất hiệu lực. Thay vào đó, trong lab này, sẽ sử dụng tường lửa DNS để ngăn các tài nguyên trong VPC phân giải địa chỉ IP của miền đáng ngờ. Mục tiêu là dùng tường lửa DNS để chặn tên miền một cách hiệu quả, bất kể thay đổi IP.\nDịch vụ được sử dụng Tường lửa DNS của Amazon Route 53 Resolver - Tài liệu Amazon CloudWatch Log Insights - Tài liệu Tiêu chí thành công Các phiên bản trong LabVpc không còn có thể giải quyết thành công địa chỉ IP của tên miền đáng ngờ mà bạn đã xác định trong Lab A ( bad.sa-demos.net Bảng điều khiển CloudWatch của Lab B)sẽ hiển thị tiến trình của bạn. Lưu ý rằng các nỗ lực truy vấn tên miền đáng ngờ sẽ trả về phản hồi NXDOMAIN. Gợi ý Để bật và cấu hình tường lửa DNS Tường lửa DNS được tìm thấy trong Amazon Route 53 Resolver phần của bảng điều khiển AWS. Quá trình này là:\nTạo danh sách tên miền có tên miền đáng ngờ bad.sa-demos.net. trong đó Tạo nhóm Quy tắc CHẶN (sử dụng phản hồi NXDOMAIN) các yêu cầu đến danh sách miền bạn đã tạo ở trên Liên kết nhóm quy tắc với LabVpc. Để phân tích nhật ký truy vấn Bạn có thể kiểm tra xem các yêu cầu DNS có bị chặn hay không theo một số cách:\nThông qua CloudWatch Log Insights. Kết nối với publicInstanceBảng điều khiển CloudWatch của Lab B nslookup bad.sa-demos.net. Kiến trúc Phòng thí nghiệm B Hướng đẫn Lab B\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/4-network-analysis/4.2-labd/",
	"title": "Lab D: Phản chiếu lưu lượng mạng VPC",
	"tags": [],
	"description": "",
	"content": "Mục tiêu Điều tra thêm publicInstance đã mở ra cho Internet. Kiểm tra các yêu cầu HTTP trên cổng TCP 443 để phát hiện hoạt động đáng ngờ. Xem xét cả lưu lượng IPv6 và IPv4. Khởi điểm Nhật ký lưu lượng VPC chỉ cung cấp thông tin về lưu lượng ở cấp độ luồng. AWS cung cấp các công cụ để thu thập và phân tích gói tin từ các Elastic Network Interfaces. Cơ sở hạ tầng đã được triễn khai Phiên bản EC2 mirrorInstance đã được cấu hình để nhận gói tin phân tích. Sử dụng ID mạng 308308 cho bao bọc VXLAN. Bộ lọc phản chiếu đã được tạo trước để loại trừ lưu lượng nội bộ VPC. Cần thêm quy tắc vào bộ lọc để phản chiếu lưu lượng HTTPS (TCP:443) và phản hồi của nó từ internet. Dịch vụ được sử dụng Amazon VPC Traffic Mirroring - Documentation Tiêu chí thành công: Cấu hình mirrorInstance như một mục tiêu phản chiếu cho việc phản chiếu lưu lượng VPC.\nThêm các quy tắc bổ sung vào bộ lọc phản chiếu đã được tạo trước đó để bao gồm:\nLưu lượng gửi đến Internet (Cổng TCP đích 443) từ publicInstance (bao gồm cả lưu lượng IPv4 và IPv6). Lưu lượng trả về từ Internet (Cổng TCP nguồn 443) đến publicInstance (bao gồm cả lưu lượng IPv4 và IPv6). Lưu ý: IPv4 và IPv6 yêu cầu các quy tắc riêng biệt trong bộ lọc phản chiếu. Tạo một phiên bản phản chiếu để bắt đầu thu thập các gói tin và gửi chúng đến mirrorInstance.\nHướng dẫn kết nối và sử dụng tshark:\nKết nối với mirrorInstance: Sử dụng Session Manager để kết nối với mirrorInstance. Chạy lệnh tshark: Mở terminal và chạy lệnh sau để xem lưu lượng được phản chiếu: sudo tshark -i vxlan0 -Y http -T fields -e ipv6.src -e ipv6.dst -e http.request.method -e http.request.uri -e http.file_data Gợi ý Configuring a Mirror Target\nMục tiêu phản chiếu có thể là các phiên bản EC2, Network Load Balancers hoặc Gateway Load Balancers. Trong hội thảo này, chúng ta sẽ sử dụng phiên bản EC2 làm mục tiêu. Giao diện Traffic Mirroring yêu cầu bạn chỉ định một Elastic Network Interface (ENI) thay vì chỉ định trực tiếp phiên bản EC2. Bạn có thể tìm ID của ENI của mirrorInstance trong Lab D CloudWatch Dashboard. Configuring a Mirror Filter\nBộ lọc phản chiếu giúp xác định loại lưu lượng nào sẽ được phản chiếu đến mục tiêu. Bạn có thể bao gồm và/hoặc loại trừ các loại lưu lượng cụ thể (dựa trên cổng nguồn/đích, IP nguồn/đích, giao thức) thông qua các quy tắc. Bộ lọc sẽ xử lý các quy tắc theo thứ tự chỉ định, dừng lại khi tìm thấy sự khớp Trong bài lab này, chúng ta muốn phản chiếu lưu lượng rời khỏi LabVpc đến cổng 443 trên internet. Cần 2 quy tắc: Một quy tắc cho yêu cầu ra ngoài đến cổng 443. Một quy tắc cho phản hồi từ cổng 443 về cổng nguồn ban đầu. Mỗi quy tắc phải cụ thể cho IPv4 hoặc IPv6 nên tổng cộng cần 4 quy tắc. Starting a Mirror Session\nMỗi phiên phản chiếu đại diện cho một nguồn phản chiếu duy nhất, gửi lưu lượng khớp với một bộ lọc phản chiếu đến một mục tiêu phản chiếu duy nhất. Bộ lọc phản chiếu có thể được tái sử dụng trong nhiều phiên, và một mục tiêu phản chiếu có thể được dùng bởi nhiều phiên phản chiếu. Tuy nhiên, một nguồn chỉ có thể liên kết với một phiên phản chiếu duy nhất. Nguồn phản chiếu được xác định bởi Elastic Network Interface (ENI), thay vì ID của instance. Bạn có thể tìm ENI ID của publicInstance trong Lab D CloudWatch Dashboard. Kiến trúc phòng thí nghiệm D Hướng dẫn Lab D\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/5-network-firewall/5.2-labf/",
	"title": "Lab F: Cấu hình các quy tắc của AWS Network Firewall",
	"tags": [],
	"description": "",
	"content": "Mục tiêu Phòng thí nghiệm bao gồm 4 phần nhỏ:\nChặn lưu lượng ICMP outbound. Chặn lưu lượng DNS đến máy chủ ngoài VPC. Chặn truy cập HTTP đến các miền cụ thể. Cảnh báo dựa trên nội dung tiêu đề HTTP. Nội Dung Block outbound ICMP Drop DNS Traffic Drop specific Domains Using suricata to inspect traffic content "
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/6-gwlb/6.2-labh/",
	"title": "Lab H: Thiết lập định tuyến cho Gateway Load Balancer",
	"tags": [],
	"description": "",
	"content": "Mục tiêu Bạn cần cấu hình định tuyến trong Lab VPC để đảm bảo toàn bộ lưu lượng IPv4 được chuyển đến tường lửa Suricata qua các điểm cuối Gateway Load Balancer (GWLB). Điều này sẽ cho phép Suricata kiểm tra toàn bộ lưu lượng IPv4 vào và ra qua IGW. Tường lửa này đã được cấu hình sẵn để chặn tất cả lưu lượng truy cập đến https://www.facebook.com qua IPv4.\nĐiểm khởi đầu Trong bài lab trước, bạn đã tạo một dịch vụ GWLB (Gateway Load Balancer) Endpoint trong VPC GWLB. Bây giờ, bạn cần tạo một endpoint trong FW Subnet của Lab VPC. Để kiểm tra tất cả lưu lượng đến và đi, bạn cần cấu hình bảng định tuyến để đảm bảo rằng lưu lượng sẽ đi qua các AWS Gateway Load Balancer endpoints trong FwSubnets trước khi rời khỏi và khi vào VPC. Cơ sở hạ tầng triễn khai sẵn AWS GWLB service endpoint (từ bài lab trước). LabVpc/FwSubnet1 và LabVpc/FwSubnet2 (một trong mỗi AZ). Lưu ý: Nếu bạn đã hoàn thành bài lab E (cấu hình định tuyến firewall NFW), thì một trong các nhiệm vụ dưới đây (gán bảng định tuyến edge với IGW của LabVpc) có thể đã được thực hiện. Bạn vẫn cần thêm các tuyến vào bảng định tuyến này.\nDịch vụ được sử dụng Amazon VPC- Route Tables Documentation AWS Gateway Load Balancer - Documentation Tiêu chí thành công Bạn đã tạo/sử dụng lại bảng định tuyến cạnh và liên kết nó với LabVpc IGW. Bạn đã thêm một tuyến đường cho mỗi khối IPv4 PubSubnet CIDR vào bảng tuyến đường biên thông qua các điểm cuối GWLB. Bạn đã thêm một tuyến đường mặc định từ mỗi FWSubnet tới IGW. Bạn đã cập nhật các tuyến IPv4 mặc định từ mỗi PubSubnet đến các điểm cuối GWLB. Bạn đã kiểm tra rằng bạn vẫn có thể truy cập Internet từ publicInstance Remote Access thông qua Systems Manager Session Manager. Để kiểm tra điều này, hãy kết nối với và ping bất kỳ trang web công cộng nào. Bạn đã kiểm tra và không thể truy cập www.facebook.com publicInstance Remote Access qua Systems Manager Session Manager Lab H CloudWatch Dashboard từ. Để kiểm tra điều này, hãy kết nối với và ping bất kỳ trang web công cộng nào. Đảm bảo rằng tất cả các tác vụ được xác định trên đã được hoàn thành. Gợi ý Ingess Route table\nConfigure the Ingress Route table Ingress Routing How to associate a route table to a subnet\nAssociate Route table to a Subnet Associate to the relevant subnets. Multiple GWLB endpoints needed\nDù bạn có thể chọn nhiều subnet khi tạo một GWLB endpoint, mỗi GWLB endpoint chỉ có thể được liên kết với một subnet duy nhất. Do đó, bạn cần tạo hai GWLB endpoints, mỗi endpoint dành cho một AZ khác nhau. Kiến trúc phòng thí nghiệm H How to test?\nKết nối với publicInstance qua AWS Session Manager: Sử dụng AWS Systems Manager Session Manager để kết nối với publicInstance. Chạy lệnh kiểm tra: Nhập lệnh sau vào terminal của publicInstance: curl -v -4 https://www.facebook.com Kết quả mong đợi: Lệnh trên nên bị timeout, có nghĩa là yêu cầu không thành công vì lưu lượng truy cập tới www.facebook.com đang bị chặn bởi firewall. Hướng dẫn Lab H\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/1-introduce/1.2-introtask/",
	"title": "Nhiệm Vụ Giới Thiệu: Quản Lý Kiểm Soát Truy Cập VPC Ở Quy Mô Lớn",
	"tags": [],
	"description": "",
	"content": "Mục tiêu: Trước khi bắt đầu các bài lab, bạn cần cấu hình các kiểm soát bảo mật cho VPC của mình để bộ cân bằng tải WebAlb có thể nhận yêu cầu HTTP/HTTPS từ kết nối internet của máy tính xách tay của bạn. Hội thảo này sử dụng các danh sách tiền tố quản lý trong VPC để hỗ trợ bạn thực hiện việc này. IPv6 đã được kích hoạt trên một số tài nguyên triển khai, và mặc dù máy tính của bạn có thể chưa được cấu hình để kết nối IPv6, chúng tôi đã bao gồm tùy chọn cho phép kết nối IPv6 nếu có sẵn.\nLưu ý rằng trong nhiều trường hợp, lưu lượng có thể không đến từ địa chỉ IP thực tế của máy tính của bạn mà từ một cổng HTTP hoặc NAT của mạng kết nối. Chúng tôi gọi đây là \u0026ldquo;Địa chỉ IP Gateway\u0026rdquo;, và địa chỉ này sẽ khác nhau cho IPv4 và IPv6.\nĐiểm bắt đầu: Mục tiêu của bạn trong bài lab này là cập nhật các kiểm soát bảo mật VPC của bạn để bộ cân bằng tải WebAlb có thể nhận lưu lượng HTTP (cổng TCP 80) từ địa chỉ IP Gateway. Chúng tôi đã thêm các quy tắc vào một số nhóm bảo mật của WebAlb tham chiếu đến VPC prefix lists để giải quyết vấn đề này. Sau khi thêm địa chỉ IP Gateway của bạn vào danh sách tiền tố quản lý đúng, bạn sẽ có thể duyệt từ máy tính của bạn đến bộ cân bằng tải WebAlb. Cơ Sở Hạ Tầng Được Triển Khai Trước Các tài nguyên sau đã được triển khai sẵn để hỗ trợ bạn:\nBộ cân bằng tải WebAlb (\u0026ldquo;webAlb\u0026rdquo;): Bao gồm một vài phiên bản EC2 phía sau nó, cung cấp một số thông tin hữu ích. Nhóm bảo mật cho WebAlb (\u0026ldquo;LabVpc/webAlbSG\u0026rdquo;): Đã chứa các quy tắc inbound cho \u0026ldquo;workshopPrefixListIPv4\u0026rdquo; và \u0026ldquo;workshopPrefixListIPv6\u0026rdquo;. Danh sách tiền tố được quản lý của VPC (IPv4) (\u0026ldquo;workshopPrefixListIPv4\u0026rdquo;): Danh sách này hiện đang trống. Đối với IPv4, sử dụng định dạng CIDR như x.x.x.x/32. Danh sách tiền tố được quản lý của VPC (IPv6) (\u0026ldquo;workshopPrefixListIPv6\u0026rdquo;): Danh sách này hiện cũng đang trống. Đối với IPv6, sử dụng định dạng xxxx:xxxx:xxxx:xxxx::/128. Bạn có thể tìm thấy các liên kết đến WebAlb và các điểm cuối CloudFront trên bảng điều khiển CloudWatch giới thiệu.\nCác Dịch Vụ Được Sử Dụng: Amazon VPC Managed Prefix Lists: Mô tả: Danh sách tiền tố được quản lý trong Amazon VPC cho phép bạn tạo và quản lý danh sách các khối CIDR mà bạn có thể tham chiếu trong các quy tắc bảo mật của nhóm bảo mật và các bảng định tuyến. Tài liệu: Amazon VPC Managed Prefix Lists Documentation Amazon VPC Security Groups: Mô tả: Nhóm bảo mật trong Amazon VPC hoạt động như một bức tường lửa ảo để kiểm soát lưu lượng vào và ra từ các tài nguyên Amazon EC2 trong VPC. Tài liệu: Amazon VPC Security Groups Documentation AWS CheckIp: Mô tả: Một dịch vụ đơn giản của AWS cho phép bạn kiểm tra địa chỉ IP công khai của bạn, giúp xác định địa chỉ IP Gateway mà bạn cần thêm vào danh sách tiền tố. Trang web: AWS CheckIp Gợi ý: What are Prefix lists?\nDanh sách tiền tố (prefix lists) là tập hợp các khối CIDR, giúp đơn giản hóa việc cấu hình và quản lý các nhóm bảo mật (security groups) và bảng định tuyến (route tables). Thay vì tham chiếu từng địa chỉ IP riêng lẻ, bạn có thể sử dụng danh sách tiền tố để gom các địa chỉ IP thường dùng vào một tập hợp và áp dụng chúng trong các quy tắc bảo mật hoặc định tuyến. Điều này giúp hợp nhất các quy tắc có cùng cổng và giao thức nhưng khác CIDR vào một quy tắc duy nhất. Tài liệu tham khảo. Finding your Gateway IP address\nĐể giới hạn quyền truy cập vào máy tính xách tay, bạn cần tìm địa chỉ IP \u0026ldquo;gateway\u0026rdquo; mà mạng của bạn sử dụng để kết nối internet, có thể thực hiện qua trang web AWS CheckIp. Địa chỉ này là một IP duy nhất, và để biến thành dải CIDR hợp lệ, bạn cần thêm /32 vào cuối. Nếu không tìm được, bạn có thể sử dụng 0.0.0.0/0 (IPv4) hoặc ::/0 (IPv6) để cho phép truy cập từ bất kỳ đâu, nhưng đây là giải pháp cuối cùng. Managing your own prefix lists\nAmazon VPC cho phép bạn tạo và quản lý prefix lists của riêng mình, có thể được tham chiếu trong các cấu trúc VPC khác như nhóm bảo mật và bảng định tuyến. Bạn có thể sử dụng prefix lists có sẵn \u0026ldquo;workshopPrefixListIPv4\u0026rdquo;, thêm địa chỉ IP gateway của bạn vào đó và sử dụng nó để kiểm soát quyền truy cập thông qua nhóm bảo mật WebAlb (\u0026ldquo;LabVpc/webAlbSG\u0026rdquo;). Introductory task completed architecture\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/5-network-firewall/5.2-labf/5.2.3-domains/",
	"title": "Drop specific Domains",
	"tags": [],
	"description": "",
	"content": "Hướng dẫn chi tiết AWS Network Firewall: Sử dụng hai động cơ quy tắc để kiểm tra gói tin. Cần Làm: Tạo quy tắc Stateless để chuyển tiếp tất cả lưu lượng đến động cơ Stateful. Đi tới Console VPC và trên menu bên trái, chọn Firewall policies dưới Network firewall. Bạn sẽ tìm thấy một NFWPolicy, được tạo ra trong cấu hình ban đầu. Nhấp vào nó và chuyển đến Stateless rule groups, nhấp vào Actions -\u0026gt; Create stateless rule group. Ở bước 1 - nhấp vào Tiếp theo. Ở bước 2, nhập các giá trị sau: Name: FwdToStateful Capacity: 100 Click Next Under Add rule Priority: 3 Protocol: Leave All selected Source: Any IPv6 adress Destination: Any IPv6 adress scroll down Rule action: Forward to stateful rule groups Đảm bảo DropPingRule có mức ưu tiên 1, DropDNS có mức ưu tiên 2 và FwDtoStateful có mức ưu tiên 3. Cuộn xuống phần Stateful rule groups và nhấp vào Actions -\u0026gt; Create stateful rule group. Chọn Danh sách tên miền theo định dạng nhóm Quy tắc Ở bước 2. Nhập tên và Dung lượng = 100. Ở bước 3, hãy hoàn thành như sau: Tên miền: www.amazon.com Phạm vi CIDR: Mặc định Giao thức: HTTP và HTTPs Hành động: Từ chối Nhấp vào Tiếp theo Bạn sẽ thấy 3 quy tắc Không trạng thái và 1 quy tắc ở trạng thái Trạng thái. Điều này sẽ không trả lại bất kỳ phản hồi nào "
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/1-introduce/1.3-walkthrough-1/",
	"title": "Hướng Dẫn Chi tiết",
	"tags": [],
	"description": "",
	"content": "Finding your Gateway IP address (tìm địa chỉ IP Gateway cá nhân). Nhiệm vụ đầu tiên là xác định địa chỉ IP Gateway mà trình duyệt của bạn sử dụng khi truy cập web. Địa chỉ này có thể không phải là địa chỉ IP trực tiếp của máy tính xách tay, tùy thuộc vào cấu hình của bạn. Sau khi có được địa chỉ này, nó sẽ được thêm vào các nhóm bảo mật của workshop để cho phép truy cập vào các trang web WebAlb và ExtAlb.\nMở trình duyệt web và điều hướng đến Trang web AWS Check IP. Ghi lại địa chỉ IP được hiển thị (ví dụ này là \u0026ldquo;14.164.224.243\u0026rdquo;) Make sure you are in the correct region (Đảm bảo đang ở đúng region). Điều hướng đến trang chủ AWS Console Đảm bảo bạn đang làm việc ở đúng vùng cho hội thảo của mình (trong ví dụ này là \u0026ldquo;US-West-2 (Oregon)\u0026rdquo;) Adding your IP to a managed prefix list (Thêm IP của cá nhân vào prefix list được quản lý). Từ trang chủ bảng điều khiển, nhấp vào hộp tìm kiếm và nhập VPC. Hãy thoải mái \u0026ldquo;yêu thích\u0026rdquo; mục này vì chúng tôi sẽ sử dụng nó trong suốt hội thảo. Từ bảng điều khiển VPC, chọn tùy chọn \u0026ldquo;Danh sách tiền tố được quản lý\u0026rdquo; từ menu bên trái. Đánh dấu vào ô lựa chọn bên cạnh danh sách tiền tố có tên workshopPrefixListIPv4. Chọn tab \u0026ldquo;Entries\u0026rdquo; để xem các tiền tố hiện có trong danh sách (nên để trống) Từ menu Actions, chọn \u0026ldquo;Modify prefix list” Từ màn hình tiếp theo, chọn \u0026ldquo;Add new entry” Trong trường CIDR Blocks, hãy thêm địa chỉ IP cổng mà bạn tìm thấy (trong ví dụ này là \u0026ldquo;14.164.224.243\u0026rdquo;) Đảm bảo bạn thêm /32 sau khi kết thúc địa chỉ IP (để cho thấy đó là một địa chỉ IP duy nhất chứ không phải một phạm vi) Thêm mô tả theo lựa chọn của bạn, chẳng hạn như Gateway IP address. Click \u0026ldquo;Save prefix list” Đảm bảo rằng yêu cầu đã được gửi thành công. Lưu ý rằng màn hình ban đầu sau khi gửi vẫn có thể hiển thị \u0026ldquo;Mục nhập danh sách tiền tố (0)\u0026rdquo;, tuy nhiên, nó sẽ hiển thị trên màn hình tiếp theo. Sau đó, hãy quay lại danh sách prefixes được quản lý bằng cách nhấp vào breadcrumb. Xác nhận rằng địa chỉ IP Gateway của bạn nằm trong danh sách prefixes. Kiểm tra xem bạn có thể truy cập vào trang web WebAlb không. Bạn có thể tìm URL bằng cách điều hướng đến bảng điều khiển Intro CloudWatch. Bạn sẽ có thể thấy một trang web tương tự như sau: Lưu ý: rằng các bản phân phối CloudFront vẫn sẽ trả về lỗi; điều này là bình thường vì đây là một phần của Phòng thí nghiệm I.\nNếu muốn, bạn có thể lặp lại quy trình để cấu hình danh sách tiền tố IPv6. Nếu bạn không có địa chỉ IPv6 trên máy tính xách tay, bạn có thể sử dụng địa chỉ ví dụ của 2001:0002:6c::301/128thay thế. "
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/3-dns-security/",
	"title": "Theo dõi: Bảo mật DNS",
	"tags": [],
	"description": "",
	"content": "Tổng quan về phòng thí nghiệm: Lab A: Bạn đã nhận được báo cáo từ bên thứ ba về hoạt động đáng ngờ đến từ một phần nào đó trong hạ tầng của bạn. Công việc đầu tiên của bạn là kích hoạt việc ghi nhật ký truy vấn DNS để có thể ghi lại các yêu cầu này - điều này sẽ giúp xác định cả nguồn và đích của các truy vấn.\nLab B: Sau khi xác định các yêu cầu đi từ VPC của bạn đến một trang web đáng ngờ, nhiệm vụ tiếp theo là chặn nó. Bạn sẽ xem xét cách Amazon Route 53 DNS Firewall có thể ngăn tài nguyên trong VPC giải quyết địa chỉ IP của tên miền đáng ngờ này. Lưu ý: Thỉnh thoảng bạn có thể thấy bảng điều khiển AWS chuyển về khu vực US East (N Virginia), đặc biệt khi làm việc với Route 53; hãy đảm bảo rằng bạn chuyển về khu vực US West (Oregon) (hoặc khu vực bạn được yêu cầu làm việc).\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/4-network-analysis/",
	"title": "Theo dõi: Phân Tích Mạng",
	"tags": [],
	"description": "",
	"content": "Tổng quan về phòng thí nghiệm: Lab C: Xác định tài nguyên VPC nào có thể nhận kết nối từ internet để kiểm tra tuân thủ và bảo mật. Nếu phát hiện truy cập không mong muốn, hãy xóa nó.\nLab D: Kiểm tra thêm lưu lượng gửi từ tài nguyên VPC đã được mở ra internet, để xác định xem có lưu lượng nào đáng ngờ hay không.\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/5-network-firewall/5.2-labf/5.2.4-suricata/",
	"title": "Using Suricata to inspect traffic content",
	"tags": [],
	"description": "",
	"content": "Hướng dẫn chi tiết Quy Tắc: AWS Network Firewall sử dụng hai động cơ (stateless và stateful) để kiểm tra gói tin. Lưu Ý: Đảm bảo có quy tắc stateless để chuyển tiếp lưu lượng đến động cơ stateful. Alert based on content header User Agent Trên menu bên trái, đi đến Firewall policies dưới Network firewall. Bạn sẽ tìm thấy NFWPolicy, được tạo ra như một phần của thiết lập ban đầu. Nhấp vào nó và chuyển đến Stateful rule groups, nhấp vào Actions -\u0026gt; Create stateful rule group. Chọn Suricata compatible rule string, và nhấp vào Next. Enter the following values: Name: Suricata-Detect-User-Agent Capacity: 100 Add under Suricata compatible rule string drop http $HOME_NET any -\u0026gt; $EXTERNAL_NET any (msg:\u0026#34;ET USER_AGENTS Suspicious User-Agent (IE/1.0) \u0026#34;; flow:established,to_server; threshold: type limit, count 2, track by_src, seconds 300; http. user_agent; content:\u0026#34;IE/1.0\u0026#34;; sid:333;) Testing Vì chúng tôi đã định cấu hình quy tắc để *giảm lưu lượng truy cập nên yêu cầu này sẽ hết thời gian chờ. "
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/5-network-firewall/",
	"title": "Theo dõi: Tường lửa mạng AWS (IPv6)",
	"tags": [],
	"description": "",
	"content": "Tổng quan về phòng thí nghiệm: Công ty của bạn đã quyết định rằng tất cả lưu lượng IPv6 sẽ được kiểm tra bởi AWS Network Firewall. Ngoài ra, tất cả lưu lượng IPv4 sẽ được kiểm tra bởi một firewall mã nguồn mở của bên thứ ba (dựa trên Suricata), chạy phía sau Gateway Load Balancer (triển khai vào một VPC riêng biệt). Các phòng thí nghiệm E và F sẽ tập trung vào việc cấu hình AWS Network Firewall với IPv6.\nLab E: sẽ cấu hình AWS Network Firewall để kiểm tra lưu lượng IPv6 đi vào và rời khỏi VPC. Lab F: sẽ bao gồm các tác vụ liên quan đến việc tạo quy tắc không trạng thái và có trạng thái trong AWS Network Firewall. "
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/6-gwlb/",
	"title": "Theo dõi: Tường lửa của bên thứ 3 sử dụng Gateway Load Balancer (GWLB)",
	"tags": [],
	"description": "",
	"content": "Tổng quan về phòng thí nghiệm Lab G: Cấu hình Gateway Load Balancer và Dịch vụ Endpoint để triển khai tường lửa bên thứ ba kiểm tra lưu lượng VPC.\nLab H: Thiết lập định tuyến trong LabVpc để đảm bảo lưu lượng IPv4 đi qua các điểm đầu cuối của Gateway Load Balancer.\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/7-waf/",
	"title": "Theo dõi: Tường lửa ứng dụng web",
	"tags": [],
	"description": "",
	"content": "Tổng quan về phòng thí nghiệm Lab I: Để bảo vệ WebAlb (Application Load Balancer) khỏi các đợt tăng đột ngột về lưu lượng hoặc các cuộc tấn công DDoS, chúng ta muốn đảm bảo rằng tất cả lưu lượng đến WebAlb phải đi qua một phân phối Amazon CloudFront, và không trực tiếp từ người dùng cuối. Mục tiêu phụ là đảm bảo rằng chỉ lưu lượng từ một phân phối CloudFront cụ thể mới được phép, thay vì bất kỳ phân phối CloudFront nào.\n"
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/8-cleanups/",
	"title": "Dọn dẹp",
	"tags": [],
	"description": "",
	"content": "Step 1 - reverse lab changes Lab I:\nDelete resource association between the WebACL and the Application - Load Balancer Delete the WebACL that you created Lab H:\nRemove the IPv4 GWLB endpoint routes from the Public Subnets Disassociate the edge route table and delete it Delete routes in the FW route tables Remove the GWLB endpoints from the LabVpc Lab G:\nDelete the GWLBe service Remove the GWLB integration in the Suricata ASG Delete the GWLB Lab F\nDisassociate the stateful rules from the NFW policy Disassociate the stateless rules from the NFW policy Delete the stateful and stateless rule groups created during the lab Delete the NFWPolicy Lab E:\nRemove ::/0 routes to NFW from the Public Subnets Remove ::/0 routes to IGW from the FW Subnets Disassociate the edge route table and delete it Lab D:\nDelete mirror session Delete mirror filter Delete mirror target Lab C:\nDelete all of the analyses from the network access scope you created Delete the network access scope you created as part of this lab. Lab B:\nDisassociate DNS firewall rule group from LabVpc Delete the rule in the rule group Delete the rule group Delete the Domain list you created Lab A:\nStop query logging for the LabVpc Delete query logging Intro\nRemove prefix list entries from IPv4 list Remove prefix list entires from IPv6 list Step 2 - pre-CloudFormation stack removal Before you delete the CloudFormation stack, you should:\nForce Delete the Suricata ECS service Step 3 - Delete the CloudFormation stack Delete CloudFormation stack Step 4 - post-CloudFormation stack removal Empty and remove Suricata S3 bucket if needed "
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://orisandll.github.io/Workshop_AWS1/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]