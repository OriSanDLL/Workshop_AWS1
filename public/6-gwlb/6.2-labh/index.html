<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.134.2">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Lab H: Configuring Routing for Gateway Load Balancer :: WORK WITH AMAZON SYSTEM MANAGER - SESSION MANAGER</title>

    
    <link href="/css/nucleus.css?1726762771" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1726762771" rel="stylesheet">
    <link href="/css/hybrid.css?1726762771" rel="stylesheet">
    <link href="/css/featherlight.min.css?1726762771" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1726762771" rel="stylesheet">
    <link href="/css/auto-complete.css?1726762771" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1726762771" rel="stylesheet">
    <link href="/css/theme.css?1726762771" rel="stylesheet">
    <link href="/css/hugo-theme.css?1726762771" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1726762771" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1726762771"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/6-gwlb/6.2-labh/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1726762771"></script>
<script type="text/javascript" src="/js/auto-complete.js?1726762771"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/localhost:1313\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1726762771"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-introduce/" title="Workshop Overview" class="dd-item 
        
        
        
        ">
      <a href="/1-introduce/">
           <b> 1. </b> Workshop Overview
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/1-introduce/1.1-architecture/" title="Architecture" class="dd-item 
        
        
        
        ">
      <a href="/1-introduce/1.1-architecture/">
           <b> 1.1 </b> Architecture
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-introduce/1.2-introtask/" title="Introductory Task: Managing VPC Access Control at Scale" class="dd-item 
        
        
        
        ">
      <a href="/1-introduce/1.2-introtask/">
           <b> 1.2 </b> Introductory Task: Managing VPC Access Control at Scale
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-introduce/1.3-walkthrough-1/" title="" class="dd-item 
        
        
        
        ">
      <a href="/1-introduce/1.3-walkthrough-1/">
          
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-prepare/" title="Preparation Steps" class="dd-item 
        
        
        
        ">
      <a href="/2-prepare/">
           <b> 2. </b> Preparation Steps
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3-dns-security/" title="Track: DNS Security" class="dd-item 
        
        
        
        ">
      <a href="/3-dns-security/">
           <b> 3. </b> Track: DNS Security
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-dns-security/3.1-laba/" title="Lab A: Gaining visibility into VPC activity" class="dd-item 
        
        
        
        ">
      <a href="/3-dns-security/3.1-laba/">
           <b> 3.1 </b> Lab A: Gaining visibility into VPC activity
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-dns-security/3.1-laba/3.1.1-wa/" title="Lab A Guide: Gaining visibility into VPC activity" class="dd-item 
        
        
        
        ">
      <a href="/3-dns-security/3.1-laba/3.1.1-wa/">
           <b> 3.1.1 </b> Lab A Guide: Gaining visibility into VPC activity
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-dns-security/3.2-labb/" title="Lab B: Implementing a DNS firewall" class="dd-item 
        
        
        
        ">
      <a href="/3-dns-security/3.2-labb/">
           <b> 3.2 </b> Lab B: Implementing a DNS firewall
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-dns-security/3.2-labb/3.2.1-wb/" title="Lab B Guide: Implementing a DNS firewall" class="dd-item 
        
        
        
        ">
      <a href="/3-dns-security/3.2-labb/3.2.1-wb/">
           <b> 3.2.1 </b> Lab B Guide: Implementing a DNS firewall
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4-network-analysis/" title="Track: Network Analysis" class="dd-item 
        
        
        
        ">
      <a href="/4-network-analysis/">
           <b> 4. </b> Track: Network Analysis
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/4-network-analysis/4.1-labc/" title="Lab C: Analysing VPC Network Configuration" class="dd-item 
        
        
        
        ">
      <a href="/4-network-analysis/4.1-labc/">
           <b> 4.1 </b> Lab C: Analysing VPC Network Configuration
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/4-network-analysis/4.1-labc/4.1.1-wc/" title="Lab C Guide: Analysing VPC Network Configuration" class="dd-item 
        
        
        
        ">
      <a href="/4-network-analysis/4.1-labc/4.1.1-wc/">
           <b> 4.1.1 </b> Lab C Guide: Analysing VPC Network Configuration
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/4-network-analysis/4.2-labd/" title="Lab D: Mirroring VPC network traffic" class="dd-item 
        
        
        
        ">
      <a href="/4-network-analysis/4.2-labd/">
           <b> 4.2 </b> Lab D: Mirroring VPC network traffic
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/4-network-analysis/4.2-labd/4.2.1-wd/" title="Lab D Guide: Mirroring VPC network traffic" class="dd-item 
        
        
        
        ">
      <a href="/4-network-analysis/4.2-labd/4.2.1-wd/">
           <b> 4.2.1 </b> Lab D Guide: Mirroring VPC network traffic
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/5-network-firewall/" title="Track: AWS Network Firewall (IPv6)" class="dd-item 
        
        
        
        ">
      <a href="/5-network-firewall/">
           <b> 5. </b> Track: AWS Network Firewall (IPv6)
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/5-network-firewall/5.1-labe/" title="Lab E: Setting the routing for AWS Network Firewall" class="dd-item 
        
        
        
        ">
      <a href="/5-network-firewall/5.1-labe/">
           <b> 5.1 </b> Lab E: Setting the routing for AWS Network Firewall
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/5-network-firewall/5.1-labe/5.1.1-we/" title="Lab E Guide: Setting the routing for AWS Network Firewall" class="dd-item 
        
        
        
        ">
      <a href="/5-network-firewall/5.1-labe/5.1.1-we/">
           <b> 5.1.1 </b> Lab E Guide: Setting the routing for AWS Network Firewall
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/5-network-firewall/5.2-labf/" title="Lab F: Configuring AWS Network Firewall Rules" class="dd-item 
        
        
        
        ">
      <a href="/5-network-firewall/5.2-labf/">
           <b> 5.2 </b> Lab F: Configuring AWS Network Firewall Rules
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/5-network-firewall/5.2-labf/5.2.1-icmp/" title="Block outbound ICMP" class="dd-item 
        
        
        
        ">
      <a href="/5-network-firewall/5.2-labf/5.2.1-icmp/">
           <b> 5.2.1 </b> Block outbound ICMP
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/5-network-firewall/5.2-labf/5.2.3-domains/" title="Drop specific Domains" class="dd-item 
        
        
        
        ">
      <a href="/5-network-firewall/5.2-labf/5.2.3-domains/">
           <b> 5.2.3 </b> Drop specific Domains
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/5-network-firewall/5.2-labf/5.2.4-suricata/" title="Using Suricata to inspect traffic content" class="dd-item 
        
        
        
        ">
      <a href="/5-network-firewall/5.2-labf/5.2.4-suricata/">
           <b> 5.2.4 </b> Using Suricata to inspect traffic content
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/5-network-firewall/5.2-labf/5.2.2-dns/" title="" class="dd-item 
        
        
        
        ">
      <a href="/5-network-firewall/5.2-labf/5.2.2-dns/">
          
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/6-gwlb/" title="Track: 3rd-party firewall using Gateway Load Balancer (GWLB)" class="dd-item 
        parent
        
        
        ">
      <a href="/6-gwlb/">
           <b> 6. </b> Track: 3rd-party firewall using Gateway Load Balancer (GWLB)
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/6-gwlb/6.1-labg/" title="Lab G: Configuring Gateway Load Balancer Service" class="dd-item 
        
        
        
        ">
      <a href="/6-gwlb/6.1-labg/">
           <b> 6.1 </b> Lab G: Configuring Gateway Load Balancer Service
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/6-gwlb/6.1-labg/6.1.1-wg/" title="Lab G Guide: Configuring Gateway Load Balancer Service" class="dd-item 
        
        
        
        ">
      <a href="/6-gwlb/6.1-labg/6.1.1-wg/">
           <b> 6.1.1 </b> Lab G Guide: Configuring Gateway Load Balancer Service
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/6-gwlb/6.2-labh/" title="Lab H: Configuring Routing for Gateway Load Balancer" class="dd-item 
        
        active
        
        ">
      <a href="/6-gwlb/6.2-labh/">
           <b> 6.2 </b> Lab H: Configuring Routing for Gateway Load Balancer
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/6-gwlb/6.2-labh/6.2.1-wh/" title="Lab H Guide: Configuring Routing for Gateway Load Balancer" class="dd-item 
        
        
        
        ">
      <a href="/6-gwlb/6.2-labh/6.2.1-wh/">
           <b> 6.2.1 </b> Lab H Guide: Configuring Routing for Gateway Load Balancer
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/7-waf/" title="Track: Web Application Firewall" class="dd-item 
        
        
        
        ">
      <a href="/7-waf/">
           <b> 7. </b> Track: Web Application Firewall
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/7-waf/7.1-labi/" title="Lab I: Protecting Web Applications" class="dd-item 
        
        
        
        ">
      <a href="/7-waf/7.1-labi/">
           <b> 7.1 </b> Lab I: Protecting Web Applications
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/7-waf/7.1-labi/7.1.1-wi/" title="Lab I Guide: Protecting Web Applications" class="dd-item 
        
        
        
        ">
      <a href="/7-waf/7.1-labi/7.1.1-wi/">
           <b> 7.1.1 </b> Lab I Guide: Protecting Web Applications
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/8-cleanups/" title="Cleanups" class="dd-item 
        
        
        
        ">
      <a href="/8-cleanups/">
           <b> 8. </b> Cleanups
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://aws.amazon.com/blogs"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj"><i class='fab fa-facebook'></i> AWS Study Group - FB Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="//localhost:1313/6-gwlb/6.2-labh/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="//localhost:1313/vi/6-gwlb/6.2-labh/">Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>18-09-2024</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Owner </b> <br>
           
            <i> <a href="https://www.linkedin.com/in/t%C3%ADn-nguy%E1%BB%85n-958922223/"  style="color:orange">Nguyễn Văn Tín</a> <br>
               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Approaches to layered security for Amazon VPC</a> > <a href='/6-gwlb/'>Track: 3rd-party firewall using Gateway Load Balancer (GWLB)</a> > Lab H: Configuring Routing for Gateway Load Balancer
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#objective">Objective</a></li>
        <li><a href="#starting-point">Starting Point</a></li>
        <li><a href="#pre-deployed-infrastructure">Pre-deployed Infrastructure</a></li>
        <li><a href="#services-used">Services Used</a></li>
        <li><a href="#success-criteria">Success Criteria</a></li>
        <li><a href="#tips">Tips</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Lab H: Configuring Routing for Gateway Load Balancer
            </h1>
          

        



	<h3 id="objective">Objective</h3>
<p>You need to configure routing in the Lab VPC to ensure all IPv4 traffic is directed to the Suricata firewall via the Gateway Load Balancer (GWLB) endpoints. This will allow Suricata to inspect all IPv4 traffic entering and leaving through the IGW. The firewall has been pre-configured to block all traffic to <a href="https://www.facebook.com">https://www.facebook.com</a> over IPv4.</p>
<h3 id="starting-point">Starting Point</h3>
<ul>
<li>In the previous lab, you created a GWLB (Gateway Load Balancer) Endpoint service in the GWLB VPC. Now, you need to create an endpoint in the FW Subnet of the Lab VPC. To inspect all ingress and egress traffic, you need to configure the route tables to ensure traffic passes through the AWS Gateway Load Balancer endpoints in the FwSubnets before leaving and entering the VPC.</li>
</ul>
<h3 id="pre-deployed-infrastructure">Pre-deployed Infrastructure</h3>
<ul>
<li>AWS GWLB service endpoint (from the previous lab).</li>
<li>LabVpc/FwSubnet1 and LabVpc/FwSubnet2 (one in each AZ).

<div class="notices note" ><p>Note: If you have completed Lab E (NFW firewall routing configuration), one of the tasks below (associating the edge route table with the LabVpc IGW) may have already been done. You still need to add routes to this route table.</p>
</div>
</li>
</ul>
<h3 id="services-used">Services Used</h3>
<ul>
<li>Amazon VPC- Route Tables <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Route_Tables.html">Documentation</a></li>
<li>AWS Gateway Load Balancer - <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/gateway/getting-started.html">Documentation</a></li>
</ul>
<h3 id="success-criteria">Success Criteria</h3>
<ul>
<li>You have created/reused the edge route table and associated it with the LabVpc IGW.</li>
<li>You have added a route for each IPv4 PubSubnet CIDR block to the edge route table via the GWLB endpoints.</li>
<li>You have added a default route from each FWSubnet to the IGW.</li>
<li>You have updated the default IPv4 routes from each PubSubnet to the GWLB endpoints.</li>
<li>You have verified that you can still access the Internet from <code>publicInstance</code> <em>Remote Access via Systems Manager Session Manager</em>. To test this, connect and ping any public website.</li>
<li>You have verified that you cannot access <a href="http://www.facebook.com/">www.facebook.com</a> from <code>publicInstance</code> <em>Remote Access via Systems Manager Session Manager</em> <a href="https://console.aws.amazon.com/cloudwatch/home?#dashboards:name=LabH">Lab H CloudWatch Dashboard</a>. To test this, connect and ping any public website. Ensure all the tasks identified above have been completed.</li>
</ul>
<h3 id="tips">Tips</h3>
<p><strong>Ingress Route table</strong></p>
<ul>
<li>Configure the Ingress Route table <a href="https://aws.amazon.com/blogs/aws/new-vpc-ingress-routing-simplifying-integration-of-third-party-appliances/">Ingress Routing</a></li>
</ul>
<p><strong>How to associate a route table to a subnet</strong></p>
<ul>
<li>Associate Route table to a Subnet <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Route_Tables.html#subnet-route-tables">Associate</a> to the relevant subnets.</li>
</ul>
<p><strong>Multiple GWLB endpoints needed</strong></p>
<ul>
<li>While you can select multiple subnets when creating a GWLB endpoint, each GWLB endpoint can only be associated with a single subnet. Therefore, you need to create two GWLB endpoints, one for each AZ.</li>
</ul>
<p><strong>Lab H Architecture</strong>
<img alt="H1" src="/images/structure/H1.png"></p>
<p><strong>How to test?</strong></p>
<ul>
<li>Connect to publicInstance via AWS Session Manager:
<ul>
<li>Use AWS Systems Manager Session Manager to connect to publicInstance.</li>
</ul>
</li>
<li>Run the test command:
<ul>
<li>Enter the following command in the publicInstance terminal:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>curl -v -4 https://www.facebook.com
</span></span></code></pre></div></li>
</ul>
</li>
<li>Expected result:
<ul>
<li>The above command should time out, meaning the request failed because traffic to <a href="https://www.facebook.com">www.facebook.com</a> is being blocked by the firewall.</li>
</ul>
</li>
</ul>
<p><a href="/6-gwlb/6.2-labh/6.2.1-wh/">Lab H Guide</a></p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/6-gwlb/6.1-labg/6.1.1-wg/" title="Lab G Guide: Configuring Gateway Load Balancer Service"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/6-gwlb/6.2-labh/6.2.1-wh/" title="Lab H Guide: Configuring Routing for Gateway Load Balancer" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1726762771"></script>
    <script src="/js/perfect-scrollbar.min.js?1726762771"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1726762771"></script>
    <script src="/js/jquery.sticky.js?1726762771"></script>
    <script src="/js/featherlight.min.js?1726762771"></script>
    <script src="/js/highlight.pack.js?1726762771"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1726762771"></script>
    <script src="/js/learn.js?1726762771"></script>
    <script src="/js/hugo-learn.js?1726762771"></script>

    <link href="/mermaid/mermaid.css?1726762771" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1726762771"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
